{
  "flow": {
    "onboarding": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "5d3ff11b-1b45-4260-a7ba-ec77f0b7af35",
                "type": "text/plain",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": false,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false,
          "$$hashKey": "object:752"
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "{{idInputError}}",
          "typeOfStateId": "variable",
          "$id": "1a9c7e14-9a3c-40f1-91bd-9b53ee32a5e2",
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "fromException",
              "$$hashKey": "object:779"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "idInputError",
              "$$hashKey": "object:780"
            },
            {
              "source": "context",
              "comparison": "contains",
              "variable": "fromException",
              "values": ["Redireciona para origem"],
              "$$hashKey": "object:781"
            }
          ],
          "$invalid": false,
          "$$hashKey": "object:770"
        },
        {
          "stateId": "welcome",
          "conditions": [
            {
              "source": "input",
              "comparison": "matches",
              "values": [".*"],
              "$$hashKey": "object:810"
            }
          ],
          "$id": "3bc41095-7f1c-491e-af08-47dc55e2cb6c",
          "$connId": "con_3",
          "$invalid": false,
          "$$hashKey": "object:771"
        }
      ],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [
        {
          "$id": "dbe32c8f-6aee-4947-b32e-8ea10700a345",
          "type": "MergeContact",
          "$title": "Definir fluxo",
          "$invalid": false,
          "settings": {
            "extras": {
              "Fluxo": "2viaBoleto"
            }
          },
          "conditions": []
        },
        {
          "$id": "7f00c426-2313-49c5-a9e3-58f644223897",
          "type": "SetVariable",
          "$title": "Definir blocoConseguiAjudar",
          "$invalid": false,
          "settings": {
            "variable": "blocoConseguiAjudar"
          },
          "conditions": []
        },
        {
          "$id": "a855e04e-473b-47d0-8412-71b198637b91",
          "type": "ExecuteScript",
          "$title": "definir origem tracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(input1, input2) {\n                if(input1 === \"true\"){\n                    if(input2 === \"true\"){\n                        return \"NA negociacao com transbordo\";\n                    } else {\n                        return \"NA negociacao sem transbordo\";\n                    }\n                } else {\n                    return \"Receptivo\";\n                }\n                \n            }",
            "inputVariables": ["isAtivation", "comTransbordo"],
            "outputVariable": "origemTrack",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "origemTrack",
              "values": ["Segunda via de Boleto (Intenção)"]
            }
          ]
        },
        {
          "$id": "b76bc0b6-46a1-49e9-82db-7d3eb9729e82",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "cleanData",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(message) {\n    try{\n        return {\n            input:message.split(\"|\")[0].trim(),\n            origem:message.split(\"|\")[1].trim(),\n            contact:message.split(\"|\")[2].trim()\n        }\n    } \n    catch(e){\n        if(message.split(\"|\").length > 1){\n            return {\n                input:message.split(\"|\")[0].trim(),\n                origem:message.split(\"|\")[1].trim(),\n                contact:message.split(\"|\")[2].trim()\n            }\n        }\n        else{\n            return {\n                input:message\n            }\n        }\n    }\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "cleanData",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "5ebd9e43-6f1c-4ff3-92b4-3e17049cb96d",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"answerAttempts\" to \"0\"",
          "$invalid": false,
          "settings": {
            "variable": "answerAttempts",
            "value": "0"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "answerAttempts"
            }
          ]
        },
        {
          "$id": "6c0ef437-3bd9-455e-9307-9974d1b1742e",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"fromException\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n   try{\n       return input.split(\"|\")[4];\n   } catch(ex){\n       return \"\";\n   }\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "fromException",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "contains",
              "variable": "input.content",
              "values": ["|"]
            }
          ]
        },
        {
          "$id": "3c6d2ee7-1cce-4a40-b35d-e18e7677c3d3",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Bot entries",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Bot entries",
            "action": "{{currentService}} | 2 via Boletos"
          },
          "conditions": []
        },
        {
          "$id": "d56048b5-1b1c-4be3-850f-0b3af8b75ac6",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"currentService\"",
          "$invalid": false,
          "settings": {
            "variable": "currentService",
            "value": "2 via Boleto"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "welcome",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-c0dcc25c-7e2f-4b83-83f7-249c9816a8a9",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7faad4a1-8bbd-4fae-93b2-1680469ca9d3",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-1860ff42-39bc-4ce4-ab0a-589726381732",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-887bff58-0ffe-4509-9509-cd39de94b2ee",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "onboarding",
      "root": true,
      "$position": {
        "top": "119px",
        "left": "644px"
      },
      "$title": "Início",
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "fallback": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "a725cf49-ba26-476f-a645-abb4115f355b",
                "type": "text/plain",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "ef6053e1-87e4-422d-b6a5-68957df4485d",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"botAttendanceOrigin\" to \"2viaboleto\"",
          "$invalid": false,
          "settings": {
            "variable": "botAttendanceOrigin",
            "value": "2viaboleto"
          },
          "conditions": []
        },
        {
          "$id": "eea7a9bb-bb8d-40b5-b9f5-fc1d040e177f",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"blockAttendanceOrigin\" to \"{{state.previous.n",
          "$invalid": false,
          "settings": {
            "variable": "blockAttendanceOrigin",
            "value": "{{state.previous.name}}"
          },
          "conditions": []
        },
        {
          "$id": "c3d4f85b-900a-4092-b8e9-077bad6fda76",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"inputAttendanceOrigin\" to \"{{input.content}}\"",
          "$invalid": false,
          "settings": {
            "variable": "inputAttendanceOrigin",
            "value": "{{input.content}}"
          },
          "conditions": []
        },
        {
          "$id": "e36fde7f-e2db-49f6-970a-dc17e89acc51",
          "type": "SetVariable",
          "$title": "Definir blocoConseguiAjudar",
          "$invalid": false,
          "settings": {
            "variable": "blocoConseguiAjudar"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "ef1cb13b-536e-4109-8207-c57c8f290e4a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "bbfff173-1229-4de1-8d6f-348f9e231355",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"answerAttempts\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(previousId, answerAttempts, idInputError) {\n    \n    if(idInputError && idInputError != previousId){\n        return 0;\n    }\n    \n    return answerAttempts;\n}",
            "inputVariables": ["state.previous.id", "answerAttempts", "idInputError"],
            "outputVariable": "answerAttempts",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "idInputError"
            }
          ]
        },
        {
          "$id": "b687e581-25cf-419c-8441-8d393be5ae1a",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"idInputError\" to \"{{state.previous.id}}\"",
          "$invalid": false,
          "settings": {
            "variable": "idInputError",
            "value": "{{state.previous.id}}"
          },
          "conditions": []
        },
        {
          "$id": "e80c56d0-8e34-4874-8a7b-e2db2f29359f",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"errorType\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(stateName) {\n    return stateName.includes(\"Menu\") ? \"Menu\" : \"Input\";\n}",
            "inputVariables": ["state.previous.name"],
            "outputVariable": "errorType",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "14467001-99de-467d-ae9b-72a1fa5deff0",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-3690a899-f8bf-4bb9-a926-95de9a109e5a",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-284b42cb-f542-493c-ab96-34c74ca7e0bb",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "fallback",
      "$position": {
        "top": "193px",
        "left": "5081px"
      },
      "$title": "Exceções",
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "welcome": {
      "$contentActions": [
        {
          "action": {
            "$id": "f2230c9d-6596-45fa-852e-1ca8d16a1690",
            "type": "SendMessage",
            "settings": {
              "id": "00000000-0000-0000-0000-000000000000",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "00000000-0000-0000-0000-000000000000",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left",
              "editing": false
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "01c114cd-64c5-4b2c-8adc-8395d45afe15",
            "type": "SendMessage",
            "settings": {
              "id": "00000000-0000-0000-0000-000000000001",
              "type": "text/plain",
              "content": "Beleza, preciso só fazer uma\nvalidação rápida antes. ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "00000000-0000-0000-0000-000000000001",
                "type": "text/plain",
                "content": "Beleza, preciso só fazer uma\nvalidação rápida antes. "
              },
              "editable": true,
              "deletable": true,
              "position": "left",
              "editing": false
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "6cbc38fc-9760-4d8c-9ba9-e3ba04ce5aae",
                "type": "text/plain",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "f7411566-af3b-4f40-875c-774a2c1901bb",
          "$connId": "con_8",
          "$id": "03984b85-7375-4a63-9ee6-357aa0dedccb",
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "01c61717-f212-48ef-96a0-cbbe8cadc9ad",
          "$connId": "con_13",
          "$id": "a6f70341-c765-43b7-824b-200dfb0871fe",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "43832f72-43ea-4f78-8c97-2eaf306703ab",
          "type": "TrackEvent",
          "$title": "Intencao de boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Intencao de boleto exibicao",
            "action": "{{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "origemTrack"
            }
          ]
        },
        {
          "$id": "443d0de7-45b5-4620-a3ed-5a7f09f50564",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Tag segunda via origem",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Tag segunda via origem",
            "action": "{{cleanData@origem}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "cleanData@origem"
            },
            {
              "source": "context",
              "comparison": "contains",
              "variable": "cleanData@input",
              "values": ["#SegundaViaDeBoleto"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "417d0b0e-d3ef-4df8-b57c-9f07d8e48202",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Executar script",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_validateCpf}}",
            "inputVariables": ["contact.extras.CPF"],
            "outputVariable": "validateCpf",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "01c61717-f212-48ef-96a0-cbbe8cadc9ad",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fb8ace57-1689-46aa-9916-eccce1460949",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c3fadd64-6335-4d6f-974d-630b4a7f57c0",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-076a09dd-50ea-4407-845a-3863abf61a27",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "welcome",
      "$position": {
        "top": "251px",
        "left": "641px"
      },
      "$title": "Boas vindas",
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "f7411566-af3b-4f40-875c-774a2c1901bb": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "01b39846-278a-4554-845b-638fef33786d",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "bdef5f60-0920-4485-b24c-70aa4f30833a",
        "$invalid": false
      },
      "$tags": [],
      "id": "f7411566-af3b-4f40-875c-774a2c1901bb",
      "root": false,
      "$title": "Temos CPF",
      "$position": {
        "top": "403px",
        "left": "326px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "01c61717-f212-48ef-96a0-cbbe8cadc9ad": {
      "$contentActions": [
        {
          "action": {
            "$id": "d52149fa-614a-4eb2-8d6c-43d87366e4df",
            "type": "SendMessage",
            "settings": {
              "id": "a0ca8880-d66e-43b2-b435-d5a197643374",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "a0ca8880-d66e-43b2-b435-d5a197643374",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b41d8f55-bafe-4124-b487-0769dda28d8e",
            "type": "SendMessage",
            "settings": {
              "id": "6cb632c9-f589-4797-831d-1c141cfcc1bb",
              "type": "text/plain",
              "content": "Qual o seu CPF? \n\n👉 Digite apenas os *números* do CPF.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "6cb632c9-f589-4797-831d-1c141cfcc1bb",
                "type": "text/plain",
                "content": "Qual o seu CPF? \n\n👉 Digite apenas os *números* do CPF."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "b0306c08-f984-401e-b110-7bbd6e9efe5c",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "d69f41b6-b286-4f39-ab5c-40a9353a0d2a",
          "$connId": "con_18",
          "$id": "0cee4430-3feb-46ee-a0af-0d878c3dcfe2",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_23",
          "$id": "fc421b29-e128-45d1-9ab5-5c34c193ea5b",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "e0d689ef-8fc5-41f1-aa0d-1ad2645d3fac",
          "type": "TrackEvent",
          "$title": "Solicitacao cpf exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Solicitacao cpf exibicao",
            "action": "{{contact.extras.Fluxo}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "57dc907d-33a6-4914-a322-b898b82b36f3",
          "type": "TrackEvent",
          "$title": "Solicitacao cpf input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Solicitacao cpf input",
            "action": "{{contact.extras.Fluxo}} | {{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-56ea3b55-b4a8-4050-99e9-39be9861d130",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d6e62684-055c-48b8-92ea-e9aaee914a93",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-afea1db1-3c66-481e-8054-70826cc32f8d",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "01c61717-f212-48ef-96a0-cbbe8cadc9ad",
      "root": false,
      "$title": "Solicitação CPF",
      "$position": {
        "top": "396px",
        "left": "930.5px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "d69f41b6-b286-4f39-ab5c-40a9353a0d2a": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "ffedaed7-f20f-47f7-b4c0-21eda181cb12",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_28",
          "$id": "474fe8ee-3286-423e-bcc4-621ab85f72a9",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["NoCampaing"],
              "variable": "campaing"
            }
          ],
          "$invalid": false,
          "typeOfStateId": "state"
        },
        {
          "stateId": "7965a23d-ed39-48ae-adef-a7dc04f8b5fd",
          "$connId": "con_33",
          "$id": "015807e9-0ea3-4e3b-b9af-191e43b119c1",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "5dfead29-7278-48fc-bdb3-516de9ac1cfa",
          "$connId": "con_38",
          "$id": "5d98bfcf-b319-4b57-ac96-95d19bd4c8d7",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["false"]
            },
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "timesInvalidCpf",
              "values": ["11"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "0492c00b-b264-4b74-b2b7-24a4f4a64a66",
          "$connId": "con_43",
          "$id": "7c2dbba5-1738-4cd6-80e7-ce8fdecca5cb",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["false"]
            },
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "timesInvalidCpf",
              "values": ["1"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "1307e7ab-afce-4367-9295-adc3100dba0d",
          "$connId": "con_48",
          "$id": "0c2318fd-4404-4157-9645-26a261846f16",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["false"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "bdef5f60-0920-4485-b24c-70aa4f30833a",
          "$connId": "con_53",
          "$id": "a8522ea9-8e7d-468f-abd6-b06b4c0015f8",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["true"]
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "b2b38214-c5a9-4bed-ac1b-48985c06397d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Executar script",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_validateCpf}}",
            "inputVariables": ["input.content"],
            "outputVariable": "validateCpf",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "63fb55c4-ce29-4e0b-8808-cdda3af9a0d5",
          "type": "ProcessHttp",
          "$title": "Requisição SmallTalks",
          "$invalid": false,
          "settings": {
            "headers": {
              "AuthenticationKey": "{{config.authKey}}"
            },
            "method": "GET",
            "uri": "{{config.urlApi}}/Smalltalks/Analyze?input={{input.content}}",
            "responseStatusVariable": "smallTalksStatus",
            "responseBodyVariable": "smallTalksBody"
          },
          "conditions": []
        },
        {
          "$id": "4fcc5e32-626f-4034-9205-defaacdbde78",
          "type": "MergeContact",
          "$title": "set cpf",
          "$invalid": false,
          "settings": {
            "extras": {
              "CPF": "{{validateCpf@value}}"
            }
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "validateCpf@isValid",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "ce505766-1d40-4640-b26c-b29f58f5abd8",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-5aa7695f-7658-4117-b0b9-4720d456873e",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-51a0214a-812c-4a2c-ac77-0741732ecd4f",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f25d85d5-3a25-4210-b140-30248a4b7d0b",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        }
      ],
      "id": "d69f41b6-b286-4f39-ab5c-40a9353a0d2a",
      "root": false,
      "$title": "Validação CPF",
      "$position": {
        "top": "551px",
        "left": "925px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1307e7ab-afce-4367-9295-adc3100dba0d": {
      "$contentActions": [
        {
          "action": {
            "$id": "1508605f-6734-489d-b536-3cc3d9e93d07",
            "type": "SendMessage",
            "settings": {
              "id": "da945580-6df5-4120-b351-3148b86d3910",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "da945580-6df5-4120-b351-3148b86d3910",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "870cae43-1b3e-4c97-a3db-8ce2aa947ae9",
            "type": "SendMessage",
            "settings": {
              "id": "bdbb9f3d-c068-4b73-bda2-34e2d354b47a",
              "type": "text/plain",
              "content": "Ops! Isso não se parece com um número de CPF...\n\n👉 Por favor, digite novamente apenas os *números* do seu CPF.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "bdbb9f3d-c068-4b73-bda2-34e2d354b47a",
                "type": "text/plain",
                "content": "Ops! Isso não se parece com um número de CPF...\n\n👉 Por favor, digite novamente apenas os *números* do seu CPF."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e91e75bb-0a8d-420a-acc4-c198c523aec9",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "d69f41b6-b286-4f39-ab5c-40a9353a0d2a",
          "$connId": "con_58",
          "$id": "79b02652-f2e0-4e6c-ba85-813f3898e75f",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_63",
          "$id": "f828f722-1f2d-4093-83cc-fac6d8d619e2",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "6dae6817-516f-46de-9ed5-b3e4e351e845",
          "type": "SetVariable",
          "$title": "Definir timesInvalidCpf",
          "$invalid": false,
          "settings": {
            "variable": "timesInvalidCpf",
            "value": "{{timesInvalidCpf}}1"
          },
          "conditions": []
        },
        {
          "$id": "e054aef8-a1c8-4623-bd1a-5a37034b5cce",
          "type": "TrackEvent",
          "$title": "Valicadao cpf",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Valicadao cpf",
            "action": "{{contact.extras.Fluxo}} | Cpf Invalido"
          },
          "conditions": []
        },
        {
          "$id": "8df22f6b-702b-4dad-ab40-3bbce75454cb",
          "type": "TrackEvent",
          "$title": "Formato incorreto cpf exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Formato incorreto cpf exibicao",
            "action": "{{contact.extras.Fluxo}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "53b04d8a-2fa1-408e-80b7-eb952f7846bd",
          "type": "TrackEvent",
          "$title": "Solicitacao cpf input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Solicitacao cpf input",
            "action": "{{contact.extras.Fluxo}} | {{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-28853260-bc38-4847-9a43-312ea231a5ff",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-99afa526-87b1-4a5a-8b1b-a80d31ec4814",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fd34bb84-af3f-4aca-ba6d-9a4fa202acf7",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-76a982fc-fc0f-43de-a7bd-919a91b8ebd2",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "1307e7ab-afce-4367-9295-adc3100dba0d",
      "root": false,
      "$title": "CPF Invalido - 1 vez",
      "$position": {
        "top": "707.5px",
        "left": "444px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "0492c00b-b264-4b74-b2b7-24a4f4a64a66": {
      "$contentActions": [
        {
          "action": {
            "$id": "e4a48502-e97f-4a10-b4d0-b6fdbbd1a1d9",
            "type": "SendMessage",
            "settings": {
              "id": "6fc70053-384d-4dfb-85a2-24fcc8c0a400",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "6fc70053-384d-4dfb-85a2-24fcc8c0a400",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "a58cff26-ad9c-448d-8c0d-68f209fbfcad",
            "type": "SendMessage",
            "settings": {
              "id": "95d90fbc-fb53-4700-a6f5-ea45852fe403",
              "type": "text/plain",
              "content": "Ainda não consegui entender seu CPF!\n\n👉 Por favor, digite novamente apenas os *números* do seu CPF.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "95d90fbc-fb53-4700-a6f5-ea45852fe403",
                "type": "text/plain",
                "content": "Ainda não consegui entender seu CPF!\n\n👉 Por favor, digite novamente apenas os *números* do seu CPF."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e77e0ad4-4d95-4b4d-a34e-0196caa37cbf",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "d69f41b6-b286-4f39-ab5c-40a9353a0d2a",
          "$connId": "con_68",
          "$id": "b698cb0a-332d-480d-a401-ff3aae93276b",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_73",
          "$id": "a0bafe51-2101-46f0-9fe3-180c93f564c5",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "04a9a272-d9ac-4008-a680-75a573c52803",
          "type": "SetVariable",
          "$title": "timesInvalidCpf++",
          "$invalid": false,
          "settings": {
            "variable": "timesInvalidCpf",
            "value": "{{timesInvalidCpf}}1"
          },
          "conditions": []
        },
        {
          "$id": "506dc143-4014-44c8-89ca-49b0ec663ff5",
          "type": "TrackEvent",
          "$title": "Valicadao cpf",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Valicadao cpf",
            "action": "{{contact.extras.Fluxo}} | Cpf Invalido"
          },
          "conditions": []
        },
        {
          "$id": "b6bfcb3d-4145-4f3d-ae6a-2487dd57aa03",
          "type": "TrackEvent",
          "$title": "Formato incorreto cpf 2 tentativa exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Formato incorreto cpf 2 tentativa exibicao",
            "action": "{{contact.extras.Fluxo}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "56a2edb2-7c76-48cc-a2b5-c07f1511f557",
          "type": "TrackEvent",
          "$title": "Solicitacao cpf input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Solicitacao cpf input",
            "action": "{{contact.extras.Fluxo}} | {{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-a4adc540-285e-4863-902a-329c49ce3abc",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-79d33af0-af78-45b6-ab0e-57ba2af6f75d",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e1bc947e-2607-40b1-9637-70bb51ff1ad2",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-506c6459-3c2e-465e-8dcb-3122eca89b35",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "0492c00b-b264-4b74-b2b7-24a4f4a64a66",
      "root": false,
      "$title": "CPF Invalido - 2 vez",
      "$position": {
        "top": "709.667px",
        "left": "729.667px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "5dfead29-7278-48fc-bdb3-516de9ac1cfa": {
      "$contentActions": [
        {
          "action": {
            "$id": "f86f3972-4606-4531-99c8-56ae17928b58",
            "type": "SendMessage",
            "settings": {
              "id": "f98a4eb5-25ee-4fe7-bf30-07a54958dddd",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "f98a4eb5-25ee-4fe7-bf30-07a54958dddd",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "9c7be5da-d973-4e63-853b-0d214d3ede9a",
            "type": "SendMessage",
            "settings": {
              "id": "0d6ceddd-2b58-4b0d-9d6d-0c73fb83ec0f",
              "type": "text/plain",
              "content": "Ainda não consegui validar o seu CPF.😕 Essa informação é necessária para emitirmos a sua segunda via.\n\nComo você quer continuar?\n*1-* Tentar novamente\n*2-* Finalizar",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "0d6ceddd-2b58-4b0d-9d6d-0c73fb83ec0f",
                "type": "text/plain",
                "content": "Ainda não consegui validar o seu CPF.😕 Essa informação é necessária para emitirmos a sua segunda via.\n\nComo você quer continuar?\n*1-* Tentar novamente\n*2-* Finalizar"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "340566de-10da-4ffa-9f27-f80ec01a4ca7",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_78",
          "$id": "ea7ffd29-3dc6-42ac-8e7f-6422b0323a0b",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Input inesperado"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "01c61717-f212-48ef-96a0-cbbe8cadc9ad",
          "$connId": "con_83",
          "$id": "92c41c3e-303d-4311-8bcd-e7dbf03a6d01",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Tentar novamente"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_88",
          "$id": "f13910c3-8059-4c93-8660-8f2f2a46b2ec",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Finalizar"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_93",
          "$id": "46d7b42d-abe9-481a-8747-9ef7fd2c7ff3",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "ba2ee829-fcd9-4d55-9a64-fef7edfd91c0",
          "type": "TrackEvent",
          "$title": "Valicadao cpf",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Valicadao cpf",
            "action": "{{contact.extras.Fluxo}} | Cpf Invalido"
          },
          "conditions": []
        },
        {
          "$id": "0ffea7b2-d827-4178-bf23-c35545a70764",
          "type": "TrackEvent",
          "$title": "Cpf boleto invalido exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Cpf boleto invalido exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        },
        {
          "$id": "15831b21-ac1a-49f3-ad32-06995f955082",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Cpf Invalido - 3 vez"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "55fe1202-4ffb-4402-a8dc-2e3cbb270800",
          "type": "ExecuteScript",
          "$title": "Definir Ação",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let opcoesMenu = {\n        \"1\": \"Tentar novamente\",\n        \"2\": \"Finalizar\"\n    };\n\n    let menuRegex = {\n        \"1\": \"tentar novamente|outra vez|^1$\",\n        \"2\": \"finalizar|encerrar|sair|^2$\"\n    };\n\n\n    for (var prop in menuRegex){\n        var match = input.match(new RegExp(menuRegex[prop], \"i\"));\n\n        if(match){\n            return opcoesMenu[prop];\n        }\n    }\n\n    return \"Input inesperado\";\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "07f0482d-1dcf-43ea-a39b-d88dda28a7b7",
          "type": "SetVariable",
          "$title": "Definir lastquestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "CPF"
          },
          "conditions": []
        },
        {
          "$id": "7d7df08a-623e-4130-908b-14cb10d8d5aa",
          "type": "ExecuteScript",
          "$title": "Define RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "intentInput",
              "values": ["Input inesperado"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentInput",
              "values": ["Finalizar"]
            }
          ]
        },
        {
          "$id": "eb2fba95-1aa5-4c62-b7a9-bb4c4814e517",
          "type": "TrackEvent",
          "$title": "Cpf boleto invalido selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Cpf boleto invalido selecao",
            "action": "{{intentInput}}"
          },
          "conditions": []
        },
        {
          "$id": "cdfb3a0f-9e1b-40dd-8172-0aa65e8377c6",
          "type": "TrackEvent",
          "$title": "Cpf boleto invalido input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Cpf boleto invalido input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentInput",
              "values": ["Input inesperado"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-9e7f2dc3-084f-4bad-9387-3cba6ca32a5d",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-dfdfb387-c61f-48aa-90d7-03a7955aef1f",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d333bd4c-ee36-40c8-843b-40c1eb640923",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9933bc07-2bd6-480d-a22d-c5fad371f4c2",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-47de9886-821e-41b6-bf03-fb8c03c15587",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "5dfead29-7278-48fc-bdb3-516de9ac1cfa",
      "root": false,
      "$title": "CPF Invalido - 3 vez",
      "$position": {
        "top": "714.5px",
        "left": "1095px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "bdef5f60-0920-4485-b24c-70aa4f30833a": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "600f9dbf-976a-41b8-82e6-d56cc12fa7cb",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "typeOfStateId": "state",
          "$connId": "con_98",
          "$id": "dc1c9537-f3a3-405c-8e68-75236af45905",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["200"],
              "variable": "responseContractsStatus"
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["204"],
              "variable": "responseContractsStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "01767157-fee8-4d9b-9afe-51db516468f8",
          "$connId": "con_103",
          "$id": "dda6322b-5d34-4349-ba2f-397258e1a2a7",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["null"],
              "variable": "responseValidPhoneBody@Name"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "99b8d73a-d833-4cdc-8d2b-9e1e7edf0b7c",
          "$connId": "con_108",
          "$id": "cbbca093-eb5d-424a-b411-9409e56763aa",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["null"],
              "variable": "responseValidPhoneBody@Name"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isAtivation",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "comTransbordo",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "3e383d8c-ad5d-4f38-a2de-8cb76de9484c",
          "$connId": "con_113",
          "$id": "6705717b-96ac-4a4d-810b-528dbb08b5c2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["null"],
              "variable": "responseValidPhoneBody@Name"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "comTransbordo"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "11b90226-5105-43b6-a968-c606ad6c78fa",
          "$connId": "con_118",
          "$id": "33edd252-514b-4380-8170-f41b69deef77",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["null"],
              "variable": "responseValidPhoneBody@Name"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "63025bff-065a-4925-acfd-410cf535b908",
          "type": "ExecuteScript",
          "$title": "Remover 55 do telefone",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(identity) {\n    let phoneNumber = identity.split('@')[0];\n    phoneNumber = phoneNumber.replace('+', '');\n    phoneNumber = phoneNumber.length == 12 ? `${phoneNumber.slice(0, 4)}9${phoneNumber.slice(4, identity.length)}` : phoneNumber;\n    phoneNumber = phoneNumber.replace(\"55\",\"\");\n    return phoneNumber;\n}",
            "inputVariables": ["contact.identity"],
            "outputVariable": "userPhoneNumber",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "637cf1de-8dca-45b7-bc47-413e921bd443",
          "type": "MergeContact",
          "$title": "set phone",
          "$invalid": false,
          "settings": {
            "extras": {},
            "phoneNumber": "{{userPhoneNumber}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "userPhoneNumber"
            }
          ]
        },
        {
          "$id": "904a8ef8-4fa4-480e-a4da-4b3aef9637b3",
          "type": "TrackEvent",
          "$title": "Valicadao cpf",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Valicadao cpf",
            "action": "{{contact.extras.Fluxo}} | Cpf Valido"
          },
          "conditions": []
        },
        {
          "$id": "9bdfbc81-19dc-4abd-ac5a-647064ae108f",
          "type": "ProcessHttp",
          "$title": "Validação contratos e telefone",
          "$invalid": false,
          "settings": {
            "headers": {},
            "method": "POST",
            "body": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\"\n}",
            "uri": "{{config.urlApi}}/api/Contract/contract-login/document/{{contact.extras.CPF}}/phone/{{contact.phoneNumber}}",
            "responseStatusVariable": "responseValidPhoneStatus",
            "responseBodyVariable": "responseValidPhoneBody"
          },
          "conditions": []
        },
        {
          "$id": "4512a2e3-cc68-4662-912a-eece668f30a1",
          "type": "ExecuteScript",
          "$title": "get if user is Client",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(responseBody) {\n                let userName = JSON.parse(responseBody);\n                \n                return !(userName.Name == null); //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["responseValidPhoneBody"],
            "outputVariable": "isClient",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "responseValidPhoneBody"
            }
          ]
        },
        {
          "$id": "83191cf4-b168-453c-9691-c2dbcb693bd6",
          "type": "MergeContact",
          "$title": "Definir nome",
          "$invalid": false,
          "settings": {
            "extras": {},
            "name": "{{responseValidPhoneBody@Name}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseValidPhoneStatus",
              "values": ["200"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isClient",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "c677f04b-88c8-4ec7-a25e-96a4d252e33a",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Redefinir responseContractsStatus",
          "$invalid": false,
          "settings": {
            "variable": "responseContractsStatus"
          },
          "conditions": []
        },
        {
          "$id": "a7d17d76-bcb1-489c-9442-4f4400c29fd6",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "redefinir responseContractsBody",
          "$invalid": false,
          "settings": {
            "variable": "responseContractsBody"
          },
          "conditions": []
        },
        {
          "$id": "6456e44c-69c8-44d3-a996-b25ff7e43361",
          "$typeOfContent": "",
          "type": "ProcessHttp",
          "$title": "get user contracts",
          "$invalid": false,
          "settings": {
            "headers": {},
            "method": "GET",
            "uri": "{{config.urlApi}}/api/Contract/user-contract?userDocument={{contact.extras.CPF}}",
            "responseStatusVariable": "responseContractsStatus",
            "responseBodyVariable": "responseContractsBody"
          },
          "conditions": []
        },
        {
          "$id": "7a4a06a6-d31b-4ce2-a9a7-791708b69b9a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"apiErrorTracking\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responseContractsStatus, responseContractsBody) {\n    let ok = responseContractsStatus == 200 ? 'ok' : 'nok';\n\n    return `Possui cadastro|/api/Contract/user-contract|${ok}|${responseContractsStatus}|${responseContractsBody}|userDocument={{contact.extras.CPF}}`;\n}",
            "inputVariables": ["responseContractsStatus", "responseContractsBody"],
            "outputVariable": "apiErrorTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "bdc43343-cdd2-4176-954b-3392265c5fc5",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Retorno api generico",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Retorno api generico",
            "action": "{{apiErrorTracking}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-1bb41ac6-b251-4b5f-8ff3-a3dcc1fe3fdb",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-918431b7-81aa-4cf1-9866-68b379b1d6fd",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-0f563a6e-f434-49df-9cd0-7fc9d4b1af91",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c42e941a-0ec1-44a6-bb01-0d9c3889eb02",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-18d976af-eba7-4b45-a2a2-af7f4c6c6bf2",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "bdef5f60-0920-4485-b24c-70aa4f30833a",
      "root": false,
      "$title": "Possue cadastro?",
      "$position": {
        "top": "1080px",
        "left": "511px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "11b90226-5105-43b6-a968-c606ad6c78fa": {
      "$contentActions": [
        {
          "action": {
            "$id": "dea2c596-704f-46cb-8936-f5b5b81d0a67",
            "type": "SendMessage",
            "settings": {
              "id": "75eec1d7-3956-4190-9127-b9d7005844ca",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "75eec1d7-3956-4190-9127-b9d7005844ca",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "1b2546a0-2fcb-44bb-b83b-db21902dc4ea",
            "type": "SendMessage",
            "settings": {
              "id": "ec06251e-879d-4a14-bf0b-6c0377666c83",
              "type": "text/plain",
              "content": "Você pode visualizar tudo referente ao seu contrato pelo app da Sim ou pelo site https://emprestimosim.com.br.\n\nVou deixar os passo-a-passos aqui embaixo 👇",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "ec06251e-879d-4a14-bf0b-6c0377666c83",
                "type": "text/plain",
                "content": "Você pode visualizar tudo referente ao seu contrato pelo app da Sim ou pelo site https://emprestimosim.com.br.\n\nVou deixar os passo-a-passos aqui embaixo 👇"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "2dc6e0f2-54e3-4e49-b2fa-90f4d92b5aac",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "0dc73eb2-1187-4317-9500-526d3f650504",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": "5000"
              },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "0dc73eb2-1187-4317-9500-526d3f650504",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": "5000"
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "3a2809be-f4f8-4bf8-bf58-3a06d4afd6db",
            "$typeOfContent": "media",
            "type": "SendMessage",
            "settings": {
              "id": "e4d54085-bbbc-4251-b8e6-9a6b098da7a9",
              "type": "application/vnd.lime.media-link+json",
              "content": {
                "title": "",
                "text": "👉 Para baixar os seus boletos",
                "type": "image/png",
                "uri": "https://s3-sa-east-1.amazonaws.com/i.imgtake.takenet.com.br/i42icfzmpw/i42icfzmpw.png",
                "aspectRatio": "1:1"
              },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "e4d54085-bbbc-4251-b8e6-9a6b098da7a9",
                "type": "application/vnd.lime.media-link+json",
                "content": {
                  "title": "",
                  "text": "👉 Para baixar os seus boletos",
                  "type": "image/png",
                  "uri": "https://s3-sa-east-1.amazonaws.com/i.imgtake.takenet.com.br/i42icfzmpw/i42icfzmpw.png",
                  "aspectRatio": "1:1"
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "818d6a82-5897-4f8f-a94d-087b8871b0db",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "b4462840-13bf-4865-aeb3-ce70c380c89d",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": "5000"
              },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b4462840-13bf-4865-aeb3-ce70c380c89d",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": "5000"
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "aa3570cb-c944-485b-a862-ae9738687426",
            "$typeOfContent": "media",
            "type": "SendMessage",
            "settings": {
              "id": "d9941502-0253-474b-b1e8-9c8d5486b43c",
              "type": "application/vnd.lime.media-link+json",
              "content": {
                "title": "",
                "text": "👉 Para verificar o status do seu contrato ",
                "type": "image/png",
                "uri": "https://s3-sa-east-1.amazonaws.com/i.imgtake.takenet.com.br/i3k2ldx0yu/i3k2ldx0yu.png",
                "aspectRatio": "1:1"
              },
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "d9941502-0253-474b-b1e8-9c8d5486b43c",
                "type": "application/vnd.lime.media-link+json",
                "content": {
                  "title": "",
                  "text": "👉 Para verificar o status do seu contrato ",
                  "type": "image/png",
                  "uri": "https://s3-sa-east-1.amazonaws.com/i.imgtake.takenet.com.br/i3k2ldx0yu/i3k2ldx0yu.png",
                  "aspectRatio": "1:1"
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "96466293-a89d-459c-aa8f-b568d982ccb4",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "8942b7c0-1caf-4405-a902-dd08531d011e",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "8942b7c0-1caf-4405-a902-dd08531d011e",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "57d8b99d-25cc-4da4-a4b6-4773616f7829",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{\n    \"recipient_type\": \"individual\",\n    \"type\": \"interactive\",\n    \"interactive\": {\n        \"type\": \"button\",\n        \"body\": {\n            \"text\": \"Consegui te ajudar com essa resposta?\"\n        },\n        \"action\": {\n          \"buttons\":[\n            {\n              \"type\": \"reply\",\n              \"reply\": {\n                \"id\": \"1.1\",\n                \"title\": \"Sim\" \n              }\n            },\n            {\n              \"type\": \"reply\",\n              \"reply\": {\n                \"id\": \"1.2\",\n                \"title\": \"Não\" \n              }\n            }\n          ] \n        }\n    }\n}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "9ea01ebd-0719-404e-bf89-9fe42c9648c4",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b3236820-85a7-474e-84b6-395e2b612543",
          "$connId": "con_123",
          "$id": "f4ac0475-a410-4561-83b6-f7d7cb0a7ea7",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["Não", "Nao", "N"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "typeOfStateId": "state",
          "$connId": "con_128",
          "$id": "cfae38c2-6f2f-4965-bd83-e98caeb4d41b",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["s", "sim"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_133",
          "$id": "b51998ff-7d6b-4df5-846d-da0a986d3216",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "8c440d4c-5505-4f58-bc5a-c87735f403e4",
          "type": "TrackEvent",
          "$title": "Validacao de usuario",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario",
            "action": "Não positivado | Receptivo"
          },
          "conditions": []
        },
        {
          "$id": "1050c043-986e-4d8d-bfbb-699d374c0181",
          "type": "TrackEvent",
          "$title": "Validacao de usuario analitico",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario analitico",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Nao positivado | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "isClient",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "051e0d23-7a07-437f-b95b-b0dc7dd1e050",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Sem contrato"
          },
          "conditions": []
        },
        {
          "$id": "4fda2bee-33cc-4f4b-934c-096781e82631",
          "type": "TrackEvent",
          "$title": "Visualize pelo app exibicao | notificacao sem contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Visualize pelo app exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | notificacao ativa sem contrato"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "semContrato",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "f5575438-3326-4aae-ac95-230289ad90c2",
          "type": "TrackEvent",
          "$title": "Visualize pelo app exibicao | bloqueada",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Visualize pelo app exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | notificacao ativa parcela bloqueada"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isAtivation",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "bloqueada",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "030aeff8-5137-420f-a39a-ba107db66e17",
          "type": "TrackEvent",
          "$title": "Visualize pelo app exibicao | positivado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Visualize pelo app exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | positivado sem contrato"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isClient",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["0"]
            }
          ]
        },
        {
          "$id": "6f436894-f435-4e5f-bb5d-d527498ab178",
          "type": "TrackEvent",
          "$title": "Visualize pelo app exibicao | nao positivado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Visualize pelo app exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Nao positivado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "isClient",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "f27018a7-2cf0-4591-ac83-ffd1791c1b21",
          "type": "TrackEvent",
          "$title": "Validacao de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato",
            "action": "{{contact.extras.CPF}} | Nao tem contrato | Receptivo"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "origemTrack",
              "values": ["Receptivo"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "066ca0dd-5568-4d76-b1a4-858e0d3ff07d",
          "type": "ProcessHttp",
          "$title": "Requisição SmallTalks",
          "$invalid": false,
          "settings": {
            "headers": {
              "AuthenticationKey": "{{config.authKey}}"
            },
            "method": "GET",
            "uri": "{{config.urlApi}}/Smalltalks/Analyze?input={{input.content}}",
            "responseStatusVariable": "smallTalksStatus",
            "responseBodyVariable": "smallTalksBody"
          },
          "conditions": []
        },
        {
          "$id": "55fa4cb5-25d9-40fd-ba95-22c47e210d12",
          "type": "TrackEvent",
          "$title": "Consegui ajudar boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Consegui ajudar boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        },
        {
          "$id": "7e7a727e-37f0-470c-a65b-b38f7c76bc41",
          "type": "TrackEvent",
          "$title": "Consegui ajudar boleto selecao | sim",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Consegui ajudar boleto selecao",
            "action": "Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Positive", "Confirmation"]
            }
          ]
        },
        {
          "$id": "6aea0d8b-9f58-408a-9d32-d704590b0100",
          "type": "TrackEvent",
          "$title": "Consegui ajudar boleto selecao | Não",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Consegui ajudar boleto selecao",
            "action": "Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation"]
            }
          ]
        },
        {
          "$id": "65ab85f1-079a-4486-b137-58e5d897157b",
          "type": "TrackEvent",
          "$title": "Consegui ajudar boleto selecao|Input Inesperado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Consegui ajudar boleto selecao",
            "action": "Input inesperado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksStatus",
              "values": ["204"]
            }
          ]
        },
        {
          "$id": "6a62a66a-dae5-4280-b04c-772fe12788c4",
          "type": "TrackEvent",
          "$title": "Consegui ajudar boleto input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Consegui ajudar boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksStatus",
              "values": ["204"]
            }
          ]
        },
        {
          "$id": "5db612b4-b2bc-400c-8a94-0bfb97b04c6b",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Sem contrato"
          },
          "conditions": []
        },
        {
          "$id": "54770b0a-83b9-4ad4-ad6d-5e334510670e",
          "type": "ExecuteScript",
          "$title": "Definir redirect object",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Positive", "Confirmation"]
            }
          ]
        },
        {
          "$id": "ccbd42d7-659b-437c-8672-644b72c67081",
          "type": "SetVariable",
          "$title": "reseta bloqueada",
          "$invalid": false,
          "settings": {
            "variable": "bloqueada"
          },
          "conditions": []
        },
        {
          "$id": "602a2d6f-7764-4daf-9cc4-522f47e23704",
          "type": "SetVariable",
          "$title": "reseta sem contrato",
          "$invalid": false,
          "settings": {
            "variable": "semContrato"
          },
          "conditions": []
        },
        {
          "$id": "49da3caa-9a03-4936-9bfc-02a94283e029",
          "type": "SetVariable",
          "$title": "Definir StatusCliente",
          "$invalid": false,
          "settings": {
            "variable": "StatusCliente",
            "value": "Nao positivado"
          },
          "conditions": []
        },
        {
          "$id": "9a75e4af-da93-4d72-9a56-33a15564b6af",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-20fa219d-5b9b-4158-b2a4-da32da5f1047",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-72173ddf-d61f-42b3-abad-1bb344fdd9c7",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c5811a58-5771-4f69-9bfd-ad722c4a8bf1",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-922799c1-2e52-46b9-a68c-ae66e6b4c46d",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-68046296-0d4b-461f-890e-6342ae0ccae1",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2c28ea8e-41a8-4ffb-87ab-73abf6e5abe8",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "11b90226-5105-43b6-a968-c606ad6c78fa",
      "root": false,
      "$title": "[Menu] Sem contrato",
      "$position": {
        "top": "1401.14px",
        "left": "735.571px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "01767157-fee8-4d9b-9afe-51db516468f8": {
      "$contentActions": [
        {
          "action": {
            "$id": "50fb6295-8c52-4f38-922c-e70d489da2a4",
            "type": "SendMessage",
            "settings": {
              "id": "2f16674f-16b9-45ce-b718-8bc99b47fd06",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "2f16674f-16b9-45ce-b718-8bc99b47fd06",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "c5dc4ce2-dfb3-4d5d-9298-6645e7df55b6",
            "type": "SendMessage",
            "settings": {
              "id": "464cfd47-884d-455b-a183-0331348aabfc",
              "type": "text/plain",
              "content": "Tudo certo!",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "464cfd47-884d-455b-a183-0331348aabfc",
                "type": "text/plain",
                "content": "Tudo certo!"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "d58e91cf-cc8d-4f5c-932a-bc8501517d68",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "$connId": "con_138",
          "$id": "f13fc296-3f0a-43d2-898b-670ce5179f35",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["200"],
              "variable": "responseContractsStatus"
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseContractsStatus",
              "values": ["204"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "877df1b8-02bd-4b2e-b8b8-4b7a4642aa16",
          "$connId": "con_143",
          "$id": "b0d3a6d5-3e64-4e89-b247-c31fa92bd9ff",
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThan",
              "values": ["1"],
              "variable": "amountBoleto"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4f657411-6291-456e-bebd-78039e739010",
          "$connId": "con_148",
          "$id": "24e7047a-d656-4b41-b5d8-a52ae824a11a",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["1"],
              "variable": "amountBoleto"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "99b8d73a-d833-4cdc-8d2b-9e1e7edf0b7c",
          "$connId": "con_153",
          "$id": "01c1db0e-23e1-40cc-9366-021f53828769",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "comTransbordo",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["0"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "3e383d8c-ad5d-4f38-a2de-8cb76de9484c",
          "$connId": "con_158",
          "$id": "dbe017f3-1069-4aaf-ad89-10b7c154db4d",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "comTransbordo",
              "values": ["false"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["0"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "11b90226-5105-43b6-a968-c606ad6c78fa",
          "$connId": "con_163",
          "$id": "38f75172-b153-475f-a257-81eeb8df3caf",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["0"],
              "variable": "amountBoleto"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fdc46d16-ad7a-4ca3-9a8e-5b00ff531474",
          "type": "SetVariable",
          "$title": "Definir origemtrack",
          "$invalid": false,
          "settings": {
            "variable": "origemTrack",
            "value": "Receptivo"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "isAtivation",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "notExists",
              "values": [],
              "variable": "origemTrack"
            }
          ]
        },
        {
          "$id": "17165619-77e8-4842-a42b-e093a5bb14f4",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Redifinir responseContractsBody",
          "$invalid": false,
          "settings": {
            "variable": "responseContractsBody"
          },
          "conditions": []
        },
        {
          "$id": "875c9e21-69f2-47c0-b505-d8a6cda66e96",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Redifinir responseContractsStatus",
          "$invalid": false,
          "settings": {
            "variable": "responseContractsStatus"
          },
          "conditions": []
        },
        {
          "$id": "23774869-da2f-4380-be42-628456178f82",
          "type": "ProcessHttp",
          "$title": "Get user contracts",
          "$invalid": false,
          "settings": {
            "headers": {},
            "method": "GET",
            "responseStatusVariable": "responseContractsStatus",
            "responseBodyVariable": "responseContractsBody",
            "uri": "{{config.urlApi}}/api/Contract/user-contract?userDocument={{contact.extras.CPF}}"
          },
          "conditions": []
        },
        {
          "$id": "af0b2c30-4278-4bef-b1a2-8a9de986e96c",
          "type": "ExecuteScript",
          "$title": "Definir número de boletos",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "\n            function run(inputContracts) {\n                try{\n                inputContracts = JSON.parse(inputContracts);\n                return inputContracts.contracts.length; //Return value will be saved as \"Return value variable\" field name\n                }\n                catch(ex){\n                    return 0;\n                }\n            }",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "amountBoleto",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseContractsStatus",
              "values": ["200"]
            }
          ]
        },
        {
          "$id": "ae49685c-3b54-41c8-9270-534a8b52a0d7",
          "type": "ExecuteScript",
          "$title": "Gera texto contratos",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(inputContracts) {\n                inputContracts = JSON.parse(inputContracts);\n                var qntBoleto = inputContracts.contracts.length;\n                var boletoTxt = \"\";\n                for(let i = 0; i<qntBoleto;i++){\n                    boletoTxt+=\"*\"+parseInt(i+1)+ \"*-\"+ inputContracts.contracts[i].dateIssue+\"\\n\";\n                }\n                return boletoTxt; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "dataBoletos",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "amountBoleto",
              "values": ["1"]
            }
          ]
        },
        {
          "$id": "db2d16ab-a02f-42dc-b53a-224065b2e732",
          "type": "TrackEvent",
          "$title": "Validacao de usuario",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario",
            "action": "Positivado | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "a7cdd9b0-38ad-41f4-aa33-695a3e378fd3",
          "type": "TrackEvent",
          "$title": "Validacao de usuario analitico",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario analitico",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Positivado | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["0"],
              "variable": "amountBoleto"
            }
          ]
        },
        {
          "$id": "443ea227-10d5-4e28-9552-49f311c12ede",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Tem contrato"
          },
          "conditions": []
        },
        {
          "$id": "7bd271f7-3142-423c-b370-f5e6ff3764de",
          "type": "TrackEvent",
          "$title": "Negociacao validacao contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao validacao contrato",
            "action": "Possui contratos"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            }
          ]
        },
        {
          "$id": "49d4e076-5949-46b8-aa30-cd54c871b15c",
          "type": "TrackEvent",
          "$title": "Validacao usuario analitico",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Positivado sem contrato | {{origemTrack}}",
            "category": "Validacao de usuario analitico"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["0"]
            }
          ]
        },
        {
          "$id": "7cdebc6e-7a75-4ebb-b20f-207628372e2a",
          "type": "TrackEvent",
          "$title": "Validacao de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato",
            "action": "{{contact.extras.CPF}} | Apenas um contrato |  {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["1"],
              "variable": "amountBoleto"
            }
          ]
        },
        {
          "$id": "c4c33c0f-f33c-4a5f-a7a6-0429d1a1f3df",
          "type": "TrackEvent",
          "$title": "Validacao de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "action": "{{contact.extras.CPF}} | Contratos multiplos |  {{origemTrack}}",
            "category": "Validacao de contrato"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThan",
              "values": ["1"],
              "variable": "amountBoleto"
            }
          ]
        },
        {
          "$id": "fb750531-a752-4696-a08c-58b159d049a1",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"apiErrorTracking\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responseContractsStatus, responseContractsBody) {\n    let ok = responseContractsStatus == 200 ? 'ok' : 'nok';\n\n    return `Tem cadastro|/api/Contract/user-contract|${ok}|${responseContractsStatus}|${responseContractsBody}|userDocument={{contact.extras.CPF}}`;\n}",
            "inputVariables": ["responseContractsStatus", "responseContractsBody"],
            "outputVariable": "apiErrorTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "2f97014a-8e34-4ea8-929f-135446a68f99",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Retorno api generico",
          "$invalid": false,
          "settings": {
            "extras": {},
            "action": "{{apiErrorTracking}}",
            "category": "Retorno api generico"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "0382477b-32c5-4feb-9a52-2d56f0baa611",
          "type": "ExecuteScript",
          "$title": "get contract if amount =1",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(inputContracts) {\n                inputContracts=JSON.parse(inputContracts);\n                return inputContracts.contracts[0]; ; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "selectedContract",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["1"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseContractsStatus",
              "values": ["200"]
            }
          ]
        },
        {
          "$id": "ad0fc905-a69a-4fc5-9543-0ba44b20de4c",
          "type": "ExecuteScript",
          "$title": "get contract number if amount = 1",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(selectedContract) {\n                selectedContract = JSON.parse(selectedContract);\n                return selectedContract.contractId.toString(); //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract"],
            "outputVariable": "contractNumber",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["1"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseContractsStatus",
              "values": ["200"]
            }
          ]
        },
        {
          "$id": "fd935979-2ca7-462f-b578-2dc6257d9377",
          "type": "ExecuteScript",
          "$title": "get installment if amount = 1",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": " function run(selectedContract) {\n    selectedContract=JSON.parse(selectedContract);\n\n    if(selectedContract.installments.length > 0) {\n        return selectedContract.installments[0].number ; //Return value will be saved as \"Return value variable\" field name\n    }\n    \n    return 0;\n}",
            "inputVariables": ["selectedContract"],
            "outputVariable": "contractInstallment",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["1"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseContractsStatus",
              "values": ["200"]
            }
          ]
        },
        {
          "$id": "45e60e0e-9e2f-4fc1-a1c2-c2561a1d4aa8",
          "type": "TrackEvent",
          "$title": "Validacao erro de API de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao erro de API de contrato",
            "action": "Ok | {{calendar.datetime}} | {{contact.phoneNumber}} | {{contact.extras.CPF}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseContractsStatus",
              "values": ["200"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            }
          ]
        },
        {
          "$id": "225be621-069c-4c5f-ae32-3f4212c1d421",
          "type": "SetVariable",
          "$title": "Definir StatusCliente",
          "$invalid": false,
          "settings": {
            "variable": "StatusCliente",
            "value": "Positivado com contrato"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "amountBoleto",
              "values": ["1"]
            }
          ]
        },
        {
          "$id": "42d0a35a-ea27-49aa-a348-06a46463f284",
          "type": "SetVariable",
          "$title": "Definir StatusCliente",
          "$invalid": false,
          "settings": {
            "variable": "StatusCliente",
            "value": "Positivado sem contrato"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "amountBoleto",
              "values": ["0"]
            }
          ]
        },
        {
          "$id": "36a28dd7-7544-40dc-a0eb-b0b6679cfb65",
          "type": "SetVariable",
          "$title": "Definir timesPassedBoleto",
          "$invalid": false,
          "settings": {
            "variable": "timesPassedBoleto"
          },
          "conditions": []
        },
        {
          "$id": "f611ae9d-db56-4143-9924-98010296f8b9",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "process apiContractTracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(inputContracts) {\n  try {\n    inputContracts = JSON.parse(inputContracts);\n\n    if (inputContracts.contracts == null || inputContracts.contracts.length == 0)\n      return \"0 contratos\";\n\n    if (inputContracts.contracts.length == 1) return \"1 contrato\";\n    if (inputContracts.contracts.length >= 2) return \"2+ contratos\";\n  }\n  catch (ex) {\n    return \"\";\n  }\n}",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "apiContractTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "1a6b7782-2e1d-4cb3-a745-cbfee9fa844d",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "process apiOkTracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responseContractsStatus) {\n  let ok = responseContractsStatus == 200 ? 'ok' : 'nok';\n  return `${ok}`;\n}",
            "inputVariables": ["responseContractsStatus"],
            "outputVariable": "apiOkTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "06efdb57-4320-4471-af64-8a65dc7bb2b2",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Tem cadastro api detalhe",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "tem cadastro api detalhe",
            "action": "{{apiOkTracking}}|{{responseContractsStatus}}|{{apiContractTracking}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-05e0acc5-65e7-461d-a378-e2fe150d9ab1",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-285234ac-512f-4b8c-b93b-cbd4188ecf7d",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-a4291563-d516-4c6e-9bb6-c2e8dff51275",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-03ce09d4-b100-47e5-bbc1-01fcec89d8f9",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-03d8b3fc-0046-4176-b2e1-f80f2e3ae970",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "01767157-fee8-4d9b-9afe-51db516468f8",
      "root": false,
      "$title": "Tem cadastro",
      "$position": {
        "top": "140px",
        "left": "2457px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "4f657411-6291-456e-bebd-78039e739010": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "354e8749-4e77-4a1b-9e58-6bc442a1634f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "typeOfStateId": "state",
          "$connId": "con_168",
          "$id": "7e909ec9-abc9-47dc-8a7c-59769b043183",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["nok"],
              "variable": "apiOkStatusTracking"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "add1ab2b-bf13-425b-b657-ceac1ef86a8c",
          "$connId": "con_173",
          "$id": "24281c15-9cc1-4f9a-98d8-6ad3fce652d5",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["BankSlipEmitted"],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "eb0c42cc-197e-424a-b74a-90f18a3de3e3",
          "$connId": "con_178",
          "$id": "06c4a3a0-bcc0-4893-860a-675f2e35c727",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["BankSlipCreated"],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "e905287c-14aa-4358-8090-063d7ab807ed",
          "$connId": "con_183",
          "$id": "6de615fb-20bb-4f30-bd1c-e4a3db046645",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["AutomaticDebt"],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "647b99c3-904e-4fca-8563-8f24b944df10",
          "$connId": "con_188",
          "$id": "6105503b-8405-4836-90dc-31b90f239b19",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["InstallmentBlocked"],
              "variable": "responseInstallmentBody@contractStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "comTransbordo",
              "values": ["false"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "c435262c-c526-4355-930a-9a66a7d02cba",
          "$connId": "con_193",
          "$id": "76e2c65c-3b9e-45b4-9cca-8df037e5e2ef",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["InstallmentBlocked"],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "320cb453-50c7-45cf-9bb6-0a8aeea998e1",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Reset \"responseInstallmentBody\"",
          "$invalid": false,
          "settings": {
            "variable": "responseInstallmentBody"
          },
          "conditions": []
        },
        {
          "$id": "17f794fa-fbe8-45cd-9f24-dcfded351fb4",
          "type": "ProcessHttp",
          "$title": "Valid contract API",
          "$invalid": false,
          "settings": {
            "headers": {},
            "uri": "{{config.urlApi}}/api/Contract/valid-installment/{{contractNumber}}/{{contractInstallment}}",
            "method": "GET",
            "responseStatusVariable": "responseInstallmentStatus",
            "responseBodyVariable": "responseInstallmentBody"
          },
          "conditions": []
        },
        {
          "$id": "7d7f018b-892b-4a4c-aab4-dfefcde67e37",
          "type": "TrackEvent",
          "$title": "Validacao vindo do fluxo retorno exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao vindo do fluxo retorno exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Um contrato | {{origemTrack}} | Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["Tem contrato"]
            }
          ]
        },
        {
          "$id": "26554038-f073-4d37-b161-f7d8c0a79808",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "process apiOkStatusTracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "const run = (status, response) =>\n{\n    if (!status || status > 299) return \"nok\";\n    if (!response) return \"nok\";\n\n    let parsedResponse = JSON.parse(response);\n    if (!parsedResponse.code || parsedResponse.code > 299) return \"nok\";\n\n    return \"ok\";\n}\n",
            "inputVariables": ["responseInstallmentStatus", "responseInstallmentBody"],
            "outputVariable": "apiOkStatusTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "d71758df-36dd-4d57-9598-77f46bafcb5a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"apiErrorTracking\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responseInstallmentStatus, responseInstallmentBody, okStatus) {\n    return `Validacao Contrato|/api/Contract/valid-installment|${okStatus}|${responseInstallmentStatus}|${responseInstallmentBody}|userDocument={{contact.extras.CPF}}`;\n}\n\n",
            "inputVariables": ["responseInstallmentStatus", "responseInstallmentBody", "apiOkStatusTracking"],
            "outputVariable": "apiErrorTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "6fd2063e-d736-4f0f-80b0-4fb5ff1623b6",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "process apiContractStatusTracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "const run = (contractStatus) => {\n  try {\n    contractStatus = JSON.parse(contractStatus).contractStatus\n\n    if (contractStatus == \"BankSlipEmitted\")\n      return \"Boleto Avulso\";\n\n    if (contractStatus == \"BankSlipCreated\")\n      return \"Emissão de boleto liberado\";\n\n    if (contractStatus == \"InstallmentBlocked\")\n      return \"Contrato Bloqueado\";\n\n    if (contractStatus == \"AutomaticDebt\")\n      return \"Débito em conta\";\n\n    return \"\";\n  }\n  catch (ex) {\n    return \"\";\n  }\n}",
            "inputVariables": ["responseInstallmentBody"],
            "outputVariable": "apiContractStatusTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [],
          "continueOnError": true
        },
        {
          "$id": "5f65e8cd-aeff-42f0-88fb-ea8d175119f2",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "validacao contrato api detalhe",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "validacao contrato api detalhe",
            "action": "{{apiOkStatusTracking}}|{{responseInstallmentStatus}}|{{apiContractStatusTracking}}"
          },
          "conditions": []
        },
        {
          "$id": "e4780872-eaeb-4e71-bf90-991dd9add734",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Retorno api generico",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Retorno api generico",
            "action": "{{apiErrorTracking}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "e6a483ba-3cd1-4b5c-88f3-3f039f46d005",
          "type": "TrackEvent",
          "$title": "Validacao boletos avulsos",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao boletos avulsos",
            "action": "Sim | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["BankSlipEmitted"],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ]
        },
        {
          "$id": "b1954590-bf44-46f8-8ba0-618644b99bfd",
          "type": "TrackEvent",
          "$title": "Validacao boletos avulsos",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao boletos avulsos",
            "action": "Não | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseInstallmentBody@contractStatus",
              "values": ["BankSlipEmitted"]
            }
          ]
        },
        {
          "$id": "18639058-3de3-448d-885d-39ca9c7251c5",
          "type": "TrackEvent",
          "$title": "Validacao de contrato selecionado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato selecionado",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{contractNumber}} |  {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contractNumber"
            }
          ]
        },
        {
          "$id": "ffe00e69-ec69-41fe-9966-14c31b079a03",
          "type": "TrackEvent",
          "$title": "Validacao de contrato negociacao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato negociacao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{contractNumber}} |  {{responseInstallmentBody@contractStatus}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contractNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "responseInstallmentBody@contractStatus"
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-6492495e-6f7d-436b-8ff0-6ce0445b868f",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8d8c2691-e0fd-4f8b-bd8a-944d43d70440",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d05ee0eb-4f36-4428-8224-227c192bdb1e",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c90133ec-6351-40a6-875f-0691b55082eb",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        }
      ],
      "id": "4f657411-6291-456e-bebd-78039e739010",
      "root": false,
      "$title": "Validação Contrato",
      "$position": {
        "top": "1083px",
        "left": "3469px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "877df1b8-02bd-4b2e-b8b8-4b7a4642aa16": {
      "$contentActions": [
        {
          "action": {
            "$id": "861647f1-8209-43f3-80d7-b95a62f97769",
            "type": "SendMessage",
            "settings": {
              "id": "5c647158-0ec3-4079-bbe8-cb5c44f523c6",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "5c647158-0ec3-4079-bbe8-cb5c44f523c6",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "392009c5-c202-43d0-9f26-af846f1e6f71",
            "type": "SendMessage",
            "settings": {
              "id": "081f5679-a9eb-4878-a8df-3ab73cf5c878",
              "type": "text/plain",
              "content": "Parece que você tem {{amountBoleto}} contratos em aberto com a gente!",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "081f5679-a9eb-4878-a8df-3ab73cf5c878",
                "type": "text/plain",
                "content": "Parece que você tem {{amountBoleto}} contratos em aberto com a gente!"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "d68cebbf-a531-4f26-afc5-a8390caebe68",
            "type": "SendMessage",
            "settings": {
              "id": "e114a77b-afa6-4f35-8194-3a6037d68708",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "e114a77b-afa6-4f35-8194-3a6037d68708",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "3b79524d-1b28-4fdf-ae1e-32d5da4e9685",
            "type": "SendMessage",
            "settings": {
              "id": "20eba89d-f7d1-4591-83c3-5876124b8114",
              "type": "text/plain",
              "content": "{{dataBoletos}}\nVocê gostaria de receber o boleto de qual deles? *Escolha apenas um por enquanto.*\n\n👉 Digite o número da opção que quer escolher.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "20eba89d-f7d1-4591-83c3-5876124b8114",
                "type": "text/plain",
                "content": "{{dataBoletos}}\nVocê gostaria de receber o boleto de qual deles? *Escolha apenas um por enquanto.*\n\n👉 Digite o número da opção que quer escolher."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "e374200e-6c05-4a4a-ab6e-01c6d1830f24",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "46a962b5-4b9d-40f9-8e68-cdc212f1f21e",
          "$connId": "con_198",
          "$id": "b5a9b5bf-eb13-4f3c-a0c2-495f1d3e1d32",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["[Menu] Adiantar boleto"],
              "variable": "state.previous.name"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4f657411-6291-456e-bebd-78039e739010",
          "$connId": "con_203",
          "$id": "ca56d233-91c1-4202-9733-1133b37b8726",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "intentResponseBody@found"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_208",
          "$id": "c86c1431-6c0c-41fe-b0e2-f44058c224a5",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "efdaccf8-faf3-48bf-b9b2-e2aa430f05af",
          "type": "ExecuteScript",
          "$title": "Definir options",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(inputContracts) {\n                inputContracts = JSON.parse(inputContracts);\n                var options = [];\n                var qntBoleto = inputContracts.contracts.length;\n                for(let i = 0; i<qntBoleto;i++){\n                   options.push(inputContracts.contracts[i].dateIssue.toString());\n                }\n                return options; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "options",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "dd386333-78aa-454d-b8bb-1e721541f7d0",
          "type": "ExecuteScript",
          "$title": "numero de boletos",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "            function run(inputContracts) {\n                inputContracts = JSON.parse(inputContracts);\n                var options = [];\n                var qntBoleto = inputContracts.contracts.length;\n                for(let i = 0; i<qntBoleto;i++){\n                   options.push(inputContracts.contracts[i].contractId.toString());\n                }\n                return options; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["responseContractsBody"],
            "outputVariable": "contractNumbers",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "b70d1954-d34b-4b74-ab71-3371164ec1e8",
          "type": "TrackEvent",
          "$title": "Contratos multiplos exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos multiplos exibicao",
            "action": "{{contact.extras.CPF}} | {{amountBoleto}} | {{contractNumbers}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "b9c42dca-d857-4939-91c8-80a9ff26431c",
          "type": "SetVariable",
          "$title": "Definir lastquestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Mais contratos"
          },
          "conditions": []
        },
        {
          "$id": "63077d88-0130-4b1c-92ac-0025055c93de",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Mais de um contrato"
          },
          "conditions": []
        },
        {
          "$id": "07866cbb-04f0-4e9f-b15a-754ff8cfdda6",
          "type": "ExecuteScript",
          "$title": "Definir requestBody",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(options) {\n    options = JSON.parse(options);\n\n    return options.map(function(o, i) {\n        return {\n            index: (i + 1).toString(),\n            text: o,\n            synonyms: [\n                Number(i + 1).toString()\n            ]\n        };\n    });\n}",
            "inputVariables": ["options"],
            "outputVariable": "requestBody",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "8d7304ed-0fc5-43b2-b028-c045c2c440fc",
          "type": "TrackEvent",
          "$title": "Validacao vindo do fluxo retorno exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao vindo do fluxo retorno exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Mais de um contrato | {{origemTrack}} | Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["Adiantar boleto"]
            }
          ]
        },
        {
          "$id": "a4444735-c042-4b27-9c73-7c5b900f0958",
          "type": "TrackEvent",
          "$title": "Validacao vindo do fluxo retorno exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao vindo do fluxo retorno exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Mais de um contrato | {{origemTrack}} | Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "state.previous.name",
              "values": ["Adiantar boleto"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "7cbdacfa-12b0-4d1f-8383-6e06e15814c0",
          "type": "ProcessHttp",
          "$title": "Requisição Intent Analyzer",
          "$invalid": false,
          "settings": {
            "headers": {
              "AuthenticationKey": "{{config.authKey}}"
            },
            "uri": "{{config.urlApi}}/Input/IntentAnalyze?input={{input.content}}",
            "method": "POST",
            "body": "{{requestBody}}",
            "responseStatusVariable": "intentResponseStatus",
            "responseBodyVariable": "intentResponseBody"
          },
          "conditions": []
        },
        {
          "$id": "68ef3104-9b15-4262-88e7-cc882e6c801d",
          "type": "ExecuteScript",
          "$title": "Get selected contract",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(intentResponseBody, contractsBody) {\n                intentResponseBody = JSON.parse(intentResponseBody);\n                contractsBody = JSON.parse(contractsBody);\n                var index  = parseInt(intentResponseBody.intent.index) - 1;\n                var contract = contractsBody.contracts[index];\n                return contract; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["intentResponseBody", "responseContractsBody"],
            "outputVariable": "selectedContract",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "97941bc7-d8d6-409f-8ffe-bbce44b6d964",
          "type": "ExecuteScript",
          "$title": "Definir contractNumber",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": " function run(selectedContract) {\n                selectedContract=JSON.parse(selectedContract);\n                return selectedContract.contractId; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract"],
            "outputVariable": "contractNumber",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "4bb4c199-08e4-478f-853e-76b0fc2fbae3",
          "type": "ExecuteScript",
          "$title": "Definir installment",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(selectedContract) {\n                selectedContract=JSON.parse(selectedContract);\n\n                if(selectedContract.installments.length > 0) {\n                    return selectedContract.installments[0].number ; //Return value will be saved as \"Return value variable\" field name\n                }\n\n                return 0;\n            }",
            "inputVariables": ["selectedContract"],
            "outputVariable": "contractInstallment",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["true"]
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "state.previous.name",
              "values": ["Adiantar boleto"]
            }
          ]
        },
        {
          "$id": "6ea7d1b8-af5a-4f37-b398-cc9beabcf745",
          "type": "TrackEvent",
          "$title": "Contratos multiplos selecao valido",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos multiplos selecao",
            "action": "{{contact.extras.CPF}} | {{contractNumber}} | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "63ff1e4b-cfcb-4a2f-8e13-8b5dc0ca52b1",
          "type": "TrackEvent",
          "$title": "Contratos multiplos input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos multiplos input",
            "action": "{{input.content}} | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["false"]
            }
          ]
        },
        {
          "$id": "63a66345-9378-4080-b7e8-b88d58b115b6",
          "type": "TrackEvent",
          "$title": "Contratos multiplos selecao invalido",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos multiplos selecao",
            "action": "Input inesperado | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["false"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-501a276b-e40f-4403-a80b-ea653bf56598",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d6196c55-8d65-445b-a13b-2010b671f450",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-797b8439-77e3-4ea2-97ef-8c63f7a18599",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-47e7ccea-b6fd-4111-87d7-8ef274da558e",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-565dbfc3-06e9-41ed-a1ec-7756bb38b600",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-0482a84a-9c39-471e-9bfe-fd558b03bbae",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "877df1b8-02bd-4b2e-b8b8-4b7a4642aa16",
      "root": false,
      "$title": "[Menu] Mais de um contrato",
      "$position": {
        "top": "268.333px",
        "left": "2452.33px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b3236820-85a7-474e-84b6-395e2b612543": {
      "$contentActions": [
        {
          "action": {
            "$id": "8d8bebac-9d49-4e55-a4b5-1374f48931e6",
            "type": "SendMessage",
            "settings": {
              "id": "0fff619b-b5c9-41d8-a641-a2a02406a5a7",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "0fff619b-b5c9-41d8-a641-a2a02406a5a7",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "0378ef1f-b31d-4c19-861a-f80fe4f015b2",
            "type": "SendMessage",
            "settings": {
              "id": "2c8da32e-76b2-44e0-87f5-654bf0e11df4",
              "type": "text/plain",
              "content": "Desculpe! Eu ainda estou aprendendo.🤖\n\nPara que eu possa te ajudar melhor, por favor selecione uma opção: \n*1-* Voltar para as opções anteriores\n*2-* Não consegui fazer o passo-a-passo da imagem\n*3-* Estou tendo problemas com o App/Site\n*4-* Finalizar",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "2c8da32e-76b2-44e0-87f5-654bf0e11df4",
                "type": "text/plain",
                "content": "Desculpe! Eu ainda estou aprendendo.🤖\n\nPara que eu possa te ajudar melhor, por favor selecione uma opção: \n*1-* Voltar para as opções anteriores\n*2-* Não consegui fazer o passo-a-passo da imagem\n*3-* Estou tendo problemas com o App/Site\n*4-* Finalizar"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "b68c5e70-4205-4121-bc4c-83e5d6f3188b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_213",
          "$id": "e9b114a4-2055-40cc-9c84-7f2d6d80c6da",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Input inesperado"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_218",
          "$id": "cb178746-b4ea-4ae6-ad6e-71325d7474de",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Voltar para as opções anteriores"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
          "$connId": "con_223",
          "$id": "8146cac6-35ba-4602-accf-30a89e36de39",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": [
                "Não consegui fazer o passo-a-passo da imagem",
                "Estou tendo problemas com o App/Site"
              ],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
          "$connId": "con_228",
          "$id": "3deea3d2-84a5-45bb-89d8-b72ca67775e4",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Finalizar"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "eb135e23-3459-4681-9ebb-91240380a9f9",
          "type": "TrackEvent",
          "$title": "Nao ajudou boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        },
        {
          "$id": "6bd72aea-5455-4003-9eb5-5fa577feb8a7",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Menu - Não conseguiu ajudar"
          },
          "conditions": []
        },
        {
          "$id": "fcbd5f1b-4f56-4526-82f4-e6988389fc06",
          "type": "ExecuteScript",
          "$title": "Define RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Menu',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Menu',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "525a9642-3c89-4dbf-a912-4ea93b26dcfb",
          "type": "ExecuteScript",
          "$title": "Definir Ação",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let opcoesMenu = {\n        \"1\": \"Voltar para as opções anteriores\",\n        \"2\": \"Não consegui fazer o passo-a-passo da imagem\",\n        \"3\": \"Estou tendo problemas com o App/Site\",\n        \"4\": \"Finalizar\"\n    };\n\n    let menuRegex = {\n        \"1\": \"Voltar para as opções anteriores|voltar|anteriores|anterior|^1$\",\n        \"2\": \"n.o consegui fazer o passo.a.passo da imagem|n.o consegui|^2$\",\n        \"3\": \"estou tendo problemas com o app.site|problemas com o app|^3$\",\n        \"4\": \"finalizar|encerrar|sair|^4$\"\n    };\n\n\n    for (var prop in menuRegex){\n        var match = input.match(new RegExp(menuRegex[prop], \"i\"));\n\n        if(match){\n            return opcoesMenu[prop];\n        }\n    }\n\n    return \"Input inesperado\";\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "0ea0b230-dbd2-415b-bf97-d02e42e5a565",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Menu"
          },
          "conditions": []
        },
        {
          "$id": "fdf0ffb1-df70-4c68-9248-b304bf25b2f4",
          "type": "TrackEvent",
          "$title": "Nao ajudou boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou boleto selecao",
            "action": "{{intentInput}}"
          },
          "conditions": []
        },
        {
          "$id": "b29a50a0-ea2a-4268-8b5c-ebe3e651f98f",
          "type": "TrackEvent",
          "$title": "Nao ajudou boleto input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["false"]
            }
          ]
        },
        {
          "$id": "4d2ec10b-a6d8-4b30-8f65-b44f13a48c68",
          "type": "ExecuteScript",
          "$title": "redirectobjet = solicitar nota",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Avaliação] - Solicitar Nota',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Avaliação] - Solicitar Nota',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentInput",
              "values": ["Finalizar"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-981d4f23-22b7-482a-a01e-5b20ce0aef1d",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9894b271-5ded-42e7-848f-7330a6c9ae54",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-0cf003a2-3cce-422a-8ca0-aa1914214590",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-927d36a0-3989-42a9-b454-ebdc16abbd83",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e1e4b123-da2a-47f4-8fc2-6fe6fe5fc5e8",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "b3236820-85a7-474e-84b6-395e2b612543",
      "root": false,
      "$title": "[Menu] Menu - Não Conseguiu",
      "$position": {
        "top": "1538.14px",
        "left": "733.571px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "e6faffcf-3557-4152-aa57-5270e5b47da3",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "c74a9406-f99c-488c-932a-51dfcd792490",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"processedInput\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    try{\n        if(input.includes(\"|\")){\n            return input.split(\"|\")[0];\n        } else{\n            return input;\n        }\n    }catch(ex){\n        return \"\";\n    }\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "processedInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "50bf8745-df6b-40e1-9fd9-1635db24a613",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"botAttendanceOrigin\" to \"2viaboleto\"",
          "$invalid": false,
          "settings": {
            "variable": "botAttendanceOrigin",
            "value": "2viaboleto"
          },
          "conditions": []
        },
        {
          "$id": "276908c4-0094-40af-a339-d5e9db85650c",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"blockAttendanceOrigin\" to \"{{state.previous.n",
          "$invalid": false,
          "settings": {
            "variable": "blockAttendanceOrigin",
            "value": "{{state.previous.name}}"
          },
          "conditions": []
        },
        {
          "$id": "b24d3a8b-6d2e-46fd-b013-259f0cecc3c0",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"inputAttendanceOrigin\" to \"{{input.content}}\"",
          "$invalid": false,
          "settings": {
            "variable": "inputAttendanceOrigin",
            "value": "{{input.content}}"
          },
          "conditions": []
        },
        {
          "$id": "a421306f-efba-4331-9c35-cf8dc4514b75",
          "type": "MergeContact",
          "$title": "Definir fila = CObrança",
          "$invalid": false,
          "settings": {
            "extras": {
              "Fila": "Cobrança"
            }
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "variable": "isAtivation",
              "comparison": "equals",
              "values": ["true"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "7a4e5fc8-faa1-46e7-ba82-009acf79c382",
          "type": "Redirect",
          "$title": "Redirect to \"Atendimento\"",
          "$invalid": false,
          "settings": {
            "context": {
              "type": "text/plain",
              "value": "{{processedInput}} | {{config.botName}} | {{contact.serialized}} | {{redirectObject}} |\n{{state.previous.name}}"
            },
            "address": "Atendimento"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-449c612d-1987-4fe4-b1e6-14b0d839480e",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-67f601c6-6339-4d24-b761-d574b8fe520e",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-94dec877-0a93-48f3-9480-d8628cd7bc25",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7723f8a5-5202-4eef-ab27-b9e327234788",
          "label": "Redirect",
          "background": "#1EA1FF",
          "canChangeBackground": false
        }
      ],
      "id": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
      "root": false,
      "$title": "Redireciona ao Transbordo",
      "$position": {
        "top": "439px",
        "left": "5082px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "cc938b79-2d05-45ac-b140-b4bf4cf539ee",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "331fd841-e65d-4c1e-a909-afce783413a1",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Reset \"idInputError\"",
          "$invalid": false,
          "settings": {
            "variable": "idInputError"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "8c9a0662-ea47-4b7a-a6ec-4071a63a1ef9",
          "type": "Redirect",
          "$title": "Redirect to \"Main\"",
          "$invalid": false,
          "settings": {
            "context": {
              "type": "text/plain",
              "value": "{{input.content}} | {{config.botName}} | {{contact.serialized}} | {{redirectObject}} | {{state.previous.name}}"
            },
            "address": "Main"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-b8dfce1a-af90-44b5-b133-412f497fd08e",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2bb0f300-e984-48ba-bd71-05fdc1f29ad9",
          "label": "Redirect",
          "background": "#1EA1FF",
          "canChangeBackground": false
        }
      ],
      "id": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
      "root": false,
      "$title": "Redireciona ao Inicio Regular",
      "$position": {
        "top": "589px",
        "left": "5086px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7a06e9f9-65c6-421b-b493-c04efd8d6eae": {
      "$contentActions": [
        {
          "action": {
            "$id": "338caa41-f8b9-49a1-8431-0b82fbc562bb",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "1fa1645d-d806-487f-9b65-8ad258591cf7",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "1fa1645d-d806-487f-9b65-8ad258591cf7",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "e51eaade-8871-4fee-a827-0641e382b0b2",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "3e962545-710f-4fa7-a347-d8337f1d66ea",
              "type": "text/plain",
              "content": "Pronto! Aqui está o seu boleto:",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "3e962545-710f-4fa7-a347-d8337f1d66ea",
                "type": "text/plain",
                "content": "Pronto! Aqui está o seu boleto:"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "08fa9422-d575-4439-99f1-1a76ad6bd8e4",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "61f714f1-719f-44c1-9a95-1b57e21f5c8d",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "61f714f1-719f-44c1-9a95-1b57e21f5c8d",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "311f41bc-a6ca-4a3c-8630-98003436656f",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "b36589fc-a7da-4ac8-bb17-046039563459",
              "type": "text/plain",
              "content": "*Linha digitável:* {{responseBarcodeBody@barcode}}\n\n*Número da parcela:* {{contractInstallment}}\n*Valor:* R$ {{contractValue}}\n*Data de vencimento:* {{contractDate}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "b36589fc-a7da-4ac8-bb17-046039563459",
                "type": "text/plain",
                "content": "*Linha digitável:* {{responseBarcodeBody@barcode}}\n\n*Número da parcela:* {{contractInstallment}}\n*Valor:* R$ {{contractValue}}\n*Data de vencimento:* {{contractDate}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "0457ca56-6a76-4a29-84d7-9b2c555b3db2",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "$connId": "con_233",
          "$id": "eef63251-fc5c-4960-a5ba-8b0d512c7e8b",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["200"],
              "variable": "responseBarcodeStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "d3b198fd-104a-4317-889b-12bc6fc95cd7",
          "typeOfStateId": "state",
          "$connId": "con_238",
          "$id": "1b6c5de5-5329-43b6-a0ff-7170739af0aa",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "9f5c5554-47a2-4cc9-82bd-2ee82e3318c7",
          "type": "TrackEvent",
          "$title": "Gerar segunda via exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Gerar segunda via exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "7141e2c5-ec9b-4266-b984-ecb3bbd19906",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Gerar Boleto"
          },
          "conditions": []
        },
        {
          "$id": "5027804b-0b60-4b0a-aeda-689b5343caf1",
          "type": "ExecuteScript",
          "$title": "Get selected contract data",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(selectedContract,contractinstallment ) {\n                selectedContract = JSON.parse(selectedContract);\n                contractinstallment = parseInt(contractinstallment);\n                return selectedContract.installments[contractinstallment - 2].dateDue; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract", "contractinstallment"],
            "outputVariable": "contractDate",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "teste"
            }
          ]
        },
        {
          "$id": "3418971b-0466-4ad3-90e7-e37ff027c412",
          "type": "ExecuteScript",
          "$title": "Get selected contract value",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(input) {\n                    var linha  = JSON.parse(input).barcode;\n                    var valor = parseFloat(linha.substring(linha.length - 10, linha.length)).toString() // uso parseFloat parar retirar os zeros e toString para converter novamente em string\n\n                    if (valor.length == 2) { // verifica se linha tem apenas 2 caracteres\n                        var valor_final = \"0,\" + valor; // coloca o zero na frente\n                    }else if (valor.length == 1) { // verifica se linha tem apenas 1 caractere\n                        var valor_final = \"0,0\" + valor; // coloca o 0,0 na frente\n                    } else { \n                    // qualquer outro valor ganha a mesma formatação\n                    var valor_final = valor.substring(0, valor.length -2) + \",\" + valor.substring(valor.length -2, valor.length);\n                    }\n                    return valor_final;\n            }",
            "inputVariables": ["responseBarcodeBody"],
            "outputVariable": "contractValue",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseBarcodeBody@barcode",
              "values": ["null"]
            }
          ]
        },
        {
          "$id": "e44a5570-1747-4dd3-b792-6b13ecd6879b",
          "type": "ExecuteScript",
          "$title": "Get actual date",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run() {\n                 var data = new Date(),\n                dia  = data.getDate().toString(),\n                diaF = (dia.length == 1) ? '0'+dia : dia,\n                mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n                mesF = (mes.length == 1) ? '0'+mes : mes,\n                anoF = data.getFullYear();\n                return diaF+\"/\"+mesF+\"/\"+anoF;\n            }",
            "inputVariables": [],
            "outputVariable": "contractDate",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "92cf1206-7556-4459-9f6d-7eae3c367e98",
          "type": "TrackEvent",
          "$title": "Gerar segunda via dados",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Gerar segunda via dados",
            "action": "{{contact.extras.CPF}} | {{contractNumber}} | {{contractInstallment}} | {{contractValue}} | {{contractDate}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "69368484-297c-4ee0-a3d7-49f26a647d5c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Gerou boleto pdf?",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(status) {\n    if(status == \"200\"){\n        return \"Ok\";\n    } else {\n        return \"Erro\";\n    }\n}",
            "inputVariables": ["responsePdfBilletStatus"],
            "outputVariable": "pdfBilletValidate",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "bbbff945-3dd2-426b-aa06-4422564dd9f0",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Validacao erro de boleto PDF",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao erro de boleto PDF",
            "action": "{{pdfBilletValidate}} | {{contractDate}} | {{contact.phoneNumber}} | {{contact.extras.CPF}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-dfd061d6-e15d-479d-bb3e-3c87462e7969",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-825111a4-2355-4644-b048-b3f1f3713658",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-6ff3725d-ee6d-459f-8083-f389e486be15",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b494c0b4-d4f1-4b35-9385-e46473c2db3c",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "7a06e9f9-65c6-421b-b493-c04efd8d6eae",
      "root": false,
      "$title": "Gerar Boleto",
      "$position": {
        "top": "1393px",
        "left": "3631px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "add1ab2b-bf13-425b-b657-ceac1ef86a8c": {
      "$contentActions": [
        {
          "action": {
            "$id": "35ce9f8c-282d-4a4c-b33d-0022390fd787",
            "type": "SendMessage",
            "settings": {
              "id": "003b0d02-e0df-4a70-b339-2dc89e0fe75d",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "003b0d02-e0df-4a70-b339-2dc89e0fe75d",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b976b31a-487d-44b1-8b08-3a01bc17b385",
            "type": "SendMessage",
            "settings": {
              "id": "f4c7455d-32b5-40de-84d0-9a8da2fdc26e",
              "type": "text/plain",
              "content": "Já existem boletos emitidos para esse contrato. Se você continuar, eles serão cancelados e você poderá fazer o pagamento apenas deste que eu vou te mandar.\n\nPosso gerar a sua segunda via?\n\n*1-* Sim, gerar a segunda via\n*2-* Não, quero finalizar",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "f4c7455d-32b5-40de-84d0-9a8da2fdc26e",
                "type": "text/plain",
                "content": "Já existem boletos emitidos para esse contrato. Se você continuar, eles serão cancelados e você poderá fazer o pagamento apenas deste que eu vou te mandar.\n\nPosso gerar a sua segunda via?\n\n*1-* Sim, gerar a segunda via\n*2-* Não, quero finalizar"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "7ba5ce85-08c4-4a65-9b06-e813dc6c5965",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_243",
          "$id": "d4dbb238-4a2b-4b0f-b639-1e186603f2c3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Input inesperado"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "eb0c42cc-197e-424a-b74a-90f18a3de3e3",
          "$connId": "con_248",
          "$id": "f7caf6b7-b987-4f7c-a10e-8a314e901eaa",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Sim, gerar a segunda via"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "c8f08cd9-4edc-45b1-9dea-a24c1d053511",
          "$connId": "con_253",
          "$id": "5d7871c5-2f9f-4322-847b-225be3f4ccc2",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Não, quero finalizar"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_258",
          "$id": "23ee2dd6-f6c6-434a-818c-8cfac23f4ed5",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "9eeebcc0-d235-4af4-a90c-25b563d6230e",
          "type": "TrackEvent",
          "$title": "Boletos avulsos exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boletos avulsos exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "d03fba24-1116-483a-9159-a8aeca278b49",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Boletos Avulsos"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "ee6def7f-b467-426b-a00d-ab213c0ef1a8",
          "type": "ExecuteScript",
          "$title": "Definir Ação",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let opcoesMenu = {\n        \"1\": \"Sim, gerar a segunda via\",\n        \"2\": \"Não, quero finalizar\"\n    };\n\n    let menuRegex = {\n        \"1\": \"sim, gerar a segunda via|sim|^s$|^1$\",\n        \"2\": \"n.o, quero finalizar|n.a|^n$|^2$\"\n    };\n\n\n    for (var prop in menuRegex){\n        var match = input.match(new RegExp(menuRegex[prop], \"i\"));\n\n        if(match){\n            return opcoesMenu[prop];\n        }\n    }\n\n    return \"Input inesperado\";\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "df58ae4d-e0b5-4216-8d43-cdda818e5736",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Boleto"
          },
          "conditions": []
        },
        {
          "$id": "90272592-97b2-49bb-8da1-fed91136e43c",
          "type": "TrackEvent",
          "$title": "Boletos avulsos selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boletos avulsos selecao",
            "action": "{{intentInput}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "e5452e49-70c7-4041-ab69-c672b9c4150c",
          "type": "TrackEvent",
          "$title": "Boletos avulsos input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boletos avulsos input",
            "action": "{{input.content}} | {{origemTrack}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentInput",
              "values": ["Input inesperado"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-c1cdfc22-7c67-44c3-91d7-0e14d6487fd8",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-21eb1fe1-32b4-45a5-b73d-691e5790792f",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f8013fa3-0421-41a2-87bc-4a469184fcb4",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-a959e245-5d2e-4b06-8edd-b680f8c6588a",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-da8da7cc-0235-4785-be15-ea34bef9d4c1",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "add1ab2b-bf13-425b-b657-ceac1ef86a8c",
      "root": false,
      "$title": "Boletos Avulsos",
      "$position": {
        "top": "1301px",
        "left": "2925px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "e905287c-14aa-4358-8090-063d7ab807ed": {
      "$contentActions": [
        {
          "action": {
            "$id": "820d318d-bb48-434c-9367-c48dee1d595e",
            "type": "SendMessage",
            "settings": {
              "id": "350378cc-1c9b-4e79-9677-a48bfbd5615d",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "350378cc-1c9b-4e79-9677-a48bfbd5615d",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b33635e2-96e2-44bf-a88a-a9ba5b7a0bba",
            "type": "SendMessage",
            "settings": {
              "id": "197f60df-c82b-4962-8fed-c888716f0e55",
              "type": "text/plain",
              "content": "Vi que a forma de pagamento do seu contrato é débito em conta.\n\nO débito da parcela já foi agendado. Aguarde o pagamento automático para não correr o risco de pagar duas vezes.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "197f60df-c82b-4962-8fed-c888716f0e55",
                "type": "text/plain",
                "content": "Vi que a forma de pagamento do seu contrato é débito em conta.\n\nO débito da parcela já foi agendado. Aguarde o pagamento automático para não correr o risco de pagar duas vezes."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "9c316408-7d95-4dcf-953f-a21b13a758d4",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "88a613cc-35d1-4098-bc0e-3b24a9fa2ead",
          "type": "TrackEvent",
          "$title": "Debito em conta exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Debito em conta exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "02a3598c-8374-4a60-8000-17f454deda72",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Debito em Conta"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b639155c-7893-4432-83f0-89b1b708af41",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-4aed0c4c-5509-493e-9f91-3f70ec547fd7",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-735b5921-2cd7-4fa6-b8f2-72c00428e4db",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-61d35297-1273-45cf-b7f9-a10a60186a0f",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "e905287c-14aa-4358-8090-063d7ab807ed",
      "root": false,
      "$title": "Débito em Conta",
      "$position": {
        "top": "1284px",
        "left": "3913px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "c435262c-c526-4355-930a-9a66a7d02cba": {
      "$contentActions": [
        {
          "action": {
            "$id": "7d527099-313d-4e14-a62e-16e50a353c1c",
            "type": "SendMessage",
            "settings": {
              "id": "e350ea62-519a-4331-a140-58a700867479",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "e350ea62-519a-4331-a140-58a700867479",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "3ad596b3-475a-4c60-9bd1-f40071a43d70",
            "type": "SendMessage",
            "settings": {
              "id": "51e8e911-8fce-41ff-9aaa-cd88ac334d4c",
              "type": "text/plain",
              "content": "Parece que o seu contrato está bloqueado.😕 Aguarde enquanto vejo se nossa equipe está disponível!",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "51e8e911-8fce-41ff-9aaa-cd88ac334d4c",
                "type": "text/plain",
                "content": "Parece que o seu contrato está bloqueado.😕 Aguarde enquanto vejo se nossa equipe está disponível!"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "250d1b83-731d-46c7-9106-a9c19f4f1cf8",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "36b3a8ae-b94e-456f-ab8e-246633034b94",
          "type": "TrackEvent",
          "$title": "Contratos bloqueado exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos bloqueado exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "c3a6926b-58c7-41f2-89be-95c0e848f704",
          "type": "TrackEvent",
          "$title": "Contratos bloqueados negociacao exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos bloqueados negociacao exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | negocie_com_transbordo_s4"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "comTransbordo",
              "values": ["true"]
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "id": "blip-tag-28e51ba2-b43e-4b27-8ca4-c62a0f264e7f",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ebdf7ba5-532e-46c6-8e7b-a65f907c2421",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "c435262c-c526-4355-930a-9a66a7d02cba",
      "root": false,
      "$title": "Parcela Bloqueada",
      "$position": {
        "top": "1305px",
        "left": "4460px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b32af699-1c34-4eae-8bb8-33fa02361d0d": {
      "$contentActions": [
        {
          "action": {
            "$id": "a340dafc-5b9c-442a-b9bf-b4d1582c4815",
            "type": "SendMessage",
            "settings": {
              "id": "caa6412c-591a-4fb3-8747-786522324ba3",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "caa6412c-591a-4fb3-8747-786522324ba3",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "23ef18d3-e7e0-42ea-b21b-c0fb81df6b09",
            "type": "SendMessage",
            "settings": {
              "id": "5963b1ad-21d3-4492-b1a8-d5262cf90c21",
              "type": "text/plain",
              "content": "Certo, como estamos fora do horário de pagamento de contas, enviarei o boleto no seu e-mail cadastrado na sim amanhã cedo.☀️\n\nLembrando que enviarei a parcela mais antiga em aberto.\n\n*Importante!* Se existiam boletos emitidos para esse contrato, eles serão cancelados e você poderá fazer o pagamento apenas do que eu vou te mandar.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "5963b1ad-21d3-4492-b1a8-d5262cf90c21",
                "type": "text/plain",
                "content": "Certo, como estamos fora do horário de pagamento de contas, enviarei o boleto no seu e-mail cadastrado na sim amanhã cedo.☀️\n\nLembrando que enviarei a parcela mais antiga em aberto.\n\n*Importante!* Se existiam boletos emitidos para esse contrato, eles serão cancelados e você poderá fazer o pagamento apenas do que eu vou te mandar."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "d40c3b16-2f58-4a78-ab0f-85bf68ea330d",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "b639155c-7893-4432-83f0-89b1b708af41",
          "$connId": "con_263",
          "$id": "251425ab-55f4-45f0-95db-9d70187b8a5b",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "4e7fbec3-2b2d-4cd6-af94-c120560ab87e",
          "type": "TrackEvent",
          "$title": "Boleto por email exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto por email exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}"
          },
          "conditions": []
        },
        {
          "$id": "ebcb57c4-d3d2-4d79-a318-03d51a8a9f50",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Boleto por Email"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-1fef287f-1048-4b96-81de-f0041abea445",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7e9d42fe-1e95-443d-bf31-233628701792",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-3a6c800c-3840-41cf-a741-0e702d79105d",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "b32af699-1c34-4eae-8bb8-33fa02361d0d",
      "root": false,
      "$title": "Horário Invalido",
      "$position": {
        "top": "1408px",
        "left": "3303px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "c8f08cd9-4edc-45b1-9dea-a24c1d053511": {
      "$contentActions": [
        {
          "action": {
            "$id": "9e8f81d8-c8a5-4775-9caa-782ed042344c",
            "type": "SendMessage",
            "settings": {
              "id": "2e86d1c4-091a-4f72-b4af-d618b1c753be",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "2e86d1c4-091a-4f72-b4af-d618b1c753be",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "cfc907e8-d7a2-479b-a5d7-6a6cae0fefaf",
            "type": "SendMessage",
            "settings": {
              "id": "adbf6c7a-80d3-4354-9be2-e286469f143e",
              "type": "text/plain",
              "content": "Tudo bem, sua solicitação foi cancelada.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "adbf6c7a-80d3-4354-9be2-e286469f143e",
                "type": "text/plain",
                "content": "Tudo bem, sua solicitação foi cancelada."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "35b64e28-8119-4fe6-9e86-72a49ce3aaba",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_268",
          "$id": "c7cbe825-8bee-48de-abac-07cdbb74684b",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "25d4458d-7416-465e-be11-2b750413ac4a",
          "type": "ExecuteScript",
          "$title": "Definir RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-bfd93043-34fe-48c6-a08c-49afde1662a9",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-85c7303c-f623-4e3d-97bc-d2576776b7b2",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "c8f08cd9-4edc-45b1-9dea-a24c1d053511",
      "root": false,
      "$title": "Não confirmou",
      "$position": {
        "top": "1438px",
        "left": "2926px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "b639155c-7893-4432-83f0-89b1b708af41": {
      "$contentActions": [
        {
          "action": {
            "$id": "a2c6c72b-4f5f-4c17-b2d1-a4d34bbf985f",
            "type": "SendMessage",
            "settings": {
              "id": "aa648c35-5601-4d77-8c21-7a10ff1c98db",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "aa648c35-5601-4d77-8c21-7a10ff1c98db",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "43475436-bab0-4fb4-86d6-06b2b5949e61",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{{templates@consegui_ajudar}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "58a7e1b6-ce07-463a-bbde-c65810720fd3",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_273",
          "$id": "3cbda259-8fdd-4849-b6c9-9baaee78a69c",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["NoCampaing"],
              "variable": "campaing"
            }
          ],
          "$invalid": false,
          "typeOfStateId": "state"
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_278",
          "$id": "3c8b4420-a4d4-49f2-a3ed-3c2428ec1612",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["Sim", "Sim conseguiu"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "7ce60d51-79d8-426e-a912-37a0074fd08a",
          "$connId": "con_283",
          "$id": "42d6c945-a6e0-41cc-9403-554550191a4a",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["false"],
              "variable": "comTransbordo"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "2dcc070b-d027-4cbf-9f4f-53591c766348",
          "$connId": "con_288",
          "$id": "ffadf9c9-21b1-4a15-a3b6-e55d4281fb71",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isAtivation",
              "values": ["true"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "412c8f2a-1e94-46ec-99eb-a7fe66456316",
          "$connId": "con_293",
          "$id": "91101b55-62e1-4937-9295-c1045949fc40",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation", "Thank", "GoodBye"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_298",
          "$id": "ff94a614-71c6-4524-a9f8-7190bcfc3f2a",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Positive", "Confirmation"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "welcome",
          "$connId": "con_303",
          "$id": "f9201fd0-9fd8-48fc-9a3f-4be3e047b031",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksStatus",
              "values": ["204"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "842d1686-036a-48d0-b165-03f5c248198a",
          "$connId": "con_308",
          "$id": "0be38675-3eb5-4129-bf3c-26b03cefd199",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_313",
          "$id": "80b6dd0b-f20f-4fff-b5bc-9409bad04fac",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "9948f7cf-d64e-4543-87e2-5a9980dfe3f3",
          "type": "ExecuteScript",
          "$title": "Definir RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "a2c4a497-710f-4046-8ed2-895c977510b0",
          "type": "TrackEvent",
          "$title": "Boleto entregue te ajudou exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue te ajudou exibicao",
            "action": "{{origem}}"
          },
          "conditions": []
        },
        {
          "$id": "fc5cd128-9936-408a-9d98-4d781559d4e3",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Consegui ajudar"
          },
          "conditions": []
        },
        {
          "$id": "fbfd4edd-f51e-47f1-9dd0-f7b026b88ec7",
          "type": "ExecuteScript",
          "$title": "get Templates",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(templates, namespaceTemplate) {\n    templates = JSON.parse(templates);\n    templates['consegui_ajudar'] = {\n        \"type\": \"template\",\n        \"template\": {\n            \"namespace\": namespaceTemplate,\n            \"name\": 'consegui_ajudar',\n            \"language\": {\n                \"code\": \"pt_BR\",\n                \"policy\": \"deterministic\"\n            },\n            \"components\": [\n                {\n                    \"type\": \"body\"\n                }\n            ]\n        }\n    };\n    return templates;\n}",
            "inputVariables": ["templates", "config.namespace"],
            "outputVariable": "templates",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "0c00e22a-20cb-4c47-a469-860dc9e780bf",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar exibicao",
            "action": "Exibicao"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isAtivation",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "66784d9b-c357-4c9a-ba38-3985627b9077",
          "type": "SetVariable",
          "$title": "Definir blocoConseguiAjudar",
          "$invalid": false,
          "settings": {
            "variable": "blocoConseguiAjudar",
            "value": "true"
          },
          "conditions": []
        },
        {
          "$id": "7f3d3b51-2b33-4ddd-a297-ee5b62b00ceb",
          "type": "TrackEvent",
          "$title": "Validacao segunda vez que gera boleto",
          "$invalid": false,
          "settings": {
            "extras": {},
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}} | Sim",
            "category": "Validacao segunda vez que gera boleto"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.phoneNumber"
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "7ca3487f-8cd7-4f2c-8fb9-a190ac621038",
          "type": "ProcessHttp",
          "$title": "Requisição SmallTalks",
          "$invalid": false,
          "settings": {
            "headers": {
              "AuthenticationKey": "{{config.authKey}}"
            },
            "method": "GET",
            "uri": "{{config.urlApi}}/Smalltalks/Analyze?input={{input.content}}",
            "responseStatusVariable": "smallTalksStatus",
            "responseBodyVariable": "smallTalksBody"
          },
          "conditions": []
        },
        {
          "$id": "dcbeae01-c529-49fe-b9ed-195d86cc84a9",
          "type": "TrackEvent",
          "$title": "Boleto entregue te ajudou selecao | Sim",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue te ajudou selecao",
            "action": "Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Positive", "Confirmation"]
            }
          ]
        },
        {
          "$id": "4ab71b5d-b8c1-4d07-90ac-6facc6460f27",
          "type": "TrackEvent",
          "$title": "Boleto entregue te ajudou selecao | Não",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue te ajudou selecao",
            "action": "Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation"]
            }
          ]
        },
        {
          "$id": "f9626b51-860d-4a4c-856a-a77c48a5e75d",
          "type": "TrackEvent",
          "$title": "Boleto entregue te ajudou selecao| Input Inesperado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue te ajudou selecao",
            "action": "Input inesperado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksStatus",
              "values": ["204"]
            }
          ]
        },
        {
          "$id": "f263ab99-7040-45c9-ad18-ae51b6602192",
          "type": "TrackEvent",
          "$title": "Boleto entregue te ajudou input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue te ajudou input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksStatus",
              "values": ["204"]
            }
          ]
        },
        {
          "$id": "9f03570e-4a91-4e29-a752-47569b49cba6",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar selecao",
            "action": "Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Confirmation"],
              "variable": "smallTalksBody@result"
            }
          ]
        },
        {
          "$id": "1fba5436-eed0-4d6c-ae5e-fe5d441b781c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-d72b8fc8-eea1-4e3d-8de1-565124547ab4",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-2f087c83-8039-4ee6-98ba-4aaf538b9164",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-cd9d222e-1a62-4adc-8437-2650b55c4bd1",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8ee003bc-e458-4240-b4f7-992ed92f7283",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c7de2165-6423-46dd-a7ba-5bdf8f2be819",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7ef0fad0-d208-4202-ba43-d21b03826c21",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "b639155c-7893-4432-83f0-89b1b708af41",
      "root": false,
      "$title": "[Menu] Conseguiu Ajudar?",
      "$position": {
        "top": "1131px",
        "left": "1931px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "412c8f2a-1e94-46ec-99eb-a7fe66456316": {
      "$contentActions": [
        {
          "action": {
            "$id": "4402c2f0-b5b9-4f37-a0d4-e1f2083c1bcc",
            "type": "SendMessage",
            "settings": {
              "id": "13b3f00d-4ca2-43ee-8806-d3e3b33e41a8",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "13b3f00d-4ca2-43ee-8806-d3e3b33e41a8",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "256f8989-df18-45f7-ba61-12bfbb9b64a0",
            "type": "SendMessage",
            "settings": {
              "id": "8bba5009-99c1-4b41-9a84-0602fc1b8085",
              "type": "text/plain",
              "content": "O que você acha que faltou? Assim você me ajuda a evoluir cada vez mais!\n\n*1-* Queria o boleto para outra parcela\n*2-* Queria gerar boletos para mais de uma parcela\n\nOu digite o seu feedback.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "8bba5009-99c1-4b41-9a84-0602fc1b8085",
                "type": "text/plain",
                "content": "O que você acha que faltou? Assim você me ajuda a evoluir cada vez mais!\n\n*1-* Queria o boleto para outra parcela\n*2-* Queria gerar boletos para mais de uma parcela\n\nOu digite o seu feedback."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "57730d6b-faaa-406b-94f3-12bb850ada30",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "1b1ba1e1-5f36-49c4-bf29-57e09787536c",
          "$connId": "con_318",
          "$id": "e7dda4e2-9494-4278-89a7-21659621ec72",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Input inesperado"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
          "$connId": "con_323",
          "$id": "377344ce-0b93-42bc-b10d-9b50f6e50b41",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": [
                "Queria o boleto para outra parcela",
                "Queria gerar boletos para mais de uma parcela"
              ],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "11b90226-5105-43b6-a968-c606ad6c78fa",
          "$connId": "con_328",
          "$id": "ba3e4b69-5790-418b-900e-1067da33ab72",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Queria o boleto para outra parcela"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "1b1ba1e1-5f36-49c4-bf29-57e09787536c",
          "$connId": "con_333",
          "$id": "b5eb987b-cd88-448e-ad71-51ef8050191c",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_338",
          "$id": "8f7b1ba4-bb09-4d7b-ad14-c946d828dfa4",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "3c0fa4c5-53de-4f23-8dc2-a46a0c7cc9d7",
          "type": "TrackEvent",
          "$title": "Boleto entregue nao ajudou exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue nao ajudou exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "538d0bac-5f51-4c64-b85f-020c34ad78ef",
          "type": "ExecuteScript",
          "$title": "Definir Ação",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let opcoesMenu = {\n        \"1\": \"Queria o boleto em PDF\",\n        \"2\": \"Queria o boleto para outra parcela\",\n        \"3\": \"Queria gerar boletos para mais de uma parcela\"\n    };\n\n    let menuRegex = {\n        \"1\": \"queria o boleto em pdf|boleto em pdf|^1$\",\n        \"2\": \"queria o boleto para outra parcela|outra parcela|^2$\",\n        \"3\": \"1ueria gerar boletos para mais de uma parcela|mais de uma parcela|^3$\"\n    };\n\n\n    for (var prop in menuRegex){\n        var match = input.match(new RegExp(menuRegex[prop], \"i\"));\n\n        if(match){\n            return opcoesMenu[prop];\n        }\n    }\n\n    return \"Input inesperado\";\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "2329071f-7076-4386-aa14-19d937a800cc",
          "type": "SetVariable",
          "$title": "Definir lastquestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Menu2"
          },
          "conditions": []
        },
        {
          "$id": "35c2a2d1-c028-49df-9fa6-d9b90503745c",
          "type": "TrackEvent",
          "$title": "Boleto entregue nao ajudou selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue nao ajudou selecao",
            "action": "{{intentInput}}"
          },
          "conditions": []
        },
        {
          "$id": "af88c751-2f3c-4f44-8275-5d0e90294f38",
          "type": "TrackEvent",
          "$title": "Boleto entregue nao ajudou input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Boleto entregue nao ajudou input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentResponseBody@found",
              "values": ["false"]
            }
          ]
        },
        {
          "$id": "471b46dd-d83d-42dd-9177-c1d6a68f857b",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "origem",
            "value": "Menu - O que faltou"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-7c38cb78-d8eb-4eff-ae62-98d0bb67eab5",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-889219f1-f4a4-4235-9d18-6f0e42bec66c",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c8dc7c40-9553-4374-bf24-e95840813a8e",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d57bcb7d-a5f4-45dc-89f8-0b20e8ba581c",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-cf0831a3-9095-4344-a3a4-68de57eaf0b9",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "412c8f2a-1e94-46ec-99eb-a7fe66456316",
      "root": false,
      "$title": "Menu - O que faltou?",
      "$position": {
        "top": "1279px",
        "left": "2203px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1b1ba1e1-5f36-49c4-bf29-57e09787536c": {
      "$contentActions": [
        {
          "action": {
            "$id": "06a6498b-0483-4765-92c1-6fc02d4b0713",
            "type": "SendMessage",
            "settings": {
              "id": "8cec2827-0144-4b11-b542-5cf5941eb242",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "8cec2827-0144-4b11-b542-5cf5941eb242",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "93c034e2-ceaf-44c7-b1f8-901a1e787042",
            "type": "SendMessage",
            "settings": {
              "id": "e3dfa8b9-a811-41b4-9779-a4b30c2856b2",
              "type": "text/plain",
              "content": "Muito obrigada por compartilhar a sua opinião!",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "e3dfa8b9-a811-41b4-9779-a4b30c2856b2",
                "type": "text/plain",
                "content": "Muito obrigada por compartilhar a sua opinião!"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "049a296a-ecfa-44b2-8d1f-f0afff0bc0a5",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_343",
          "$id": "852e5e41-4325-4d3b-8d12-b696d042aa7c",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "09a51676-81c9-4842-90cb-f7dc1ad2fd1d",
          "type": "ExecuteScript",
          "$title": "Define RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "5c3f9079-18db-436c-82e5-2774665c8262",
          "type": "TrackEvent",
          "$title": "Track \"Obrigada pelo feedback exibicao\"",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Obrigada pelo feedback exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-97d7315b-348d-4950-8fb8-2fcb6c594201",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f753a6fe-c434-4da2-9802-f36e1df5fa60",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-78e79b15-a430-4767-83a2-001385c62da1",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "1b1ba1e1-5f36-49c4-bf29-57e09787536c",
      "root": false,
      "$title": "Agradecimento",
      "$position": {
        "top": "457px",
        "left": "4742px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "294e957c-f15c-4cf7-a940-76de1ce022aa": {
      "$contentActions": [
        {
          "action": {
            "$id": "5e5e7261-cc8e-4f4a-9f63-db40a6931331",
            "type": "SendMessage",
            "settings": {
              "id": "c0e81d28-dbe2-4964-bcc8-41f6d248d33f",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "c0e81d28-dbe2-4964-bcc8-41f6d248d33f",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "9f8a4b5e-86aa-4910-a427-c03322b8bcad",
            "type": "SendMessage",
            "settings": {
              "id": "37a30ad7-5a20-4616-acc4-b71ebce59096",
              "type": "text/plain",
              "content": "❌ Opa! Não consegui gerar o seu boleto por causa de um erro. Aguarde enquanto vejo se nossa equipe está disponível.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "37a30ad7-5a20-4616-acc4-b71ebce59096",
                "type": "text/plain",
                "content": "❌ Opa! Não consegui gerar o seu boleto por causa de um erro. Aguarde enquanto vejo se nossa equipe está disponível."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "bddc304a-2319-40d1-a7a3-29ef1a63db5b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "bb07fc63-0a6e-414b-b660-0fc277279338",
          "type": "MergeContact",
          "$title": "Definir fila",
          "$invalid": false,
          "settings": {
            "extras": {
              "Fila": "Default"
            }
          },
          "conditions": []
        },
        {
          "$id": "0ea3a8c4-85f9-427b-b562-342513bb9b10",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Erro api boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Erro api boleto exibicao",
            "action": "{{state.previous.name}} | {{contact.extras.CPF}} | {{contact.phoneNumber}} | {{calendar.datetime}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            }
          ]
        },
        {
          "$id": "57e6d9a0-502d-4c6c-9558-0432ec7ab699",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Validacao erro de API de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao erro de API de contrato",
            "action": "Erro | {{calendar.datetime}} | {{contact.phoneNumber}} | {{contact.extras.CPF}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["Tem contrato"]
            }
          ]
        },
        {
          "$id": "dc4cd055-cabf-497a-8837-709e797d4d46",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Date",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run() {\n    try {\n        return new Date().toLocaleString();\n    } catch(ex){\n        return \"\"\n    }\n}",
            "inputVariables": [],
            "outputVariable": "currentDateTime",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "909bc52e-cdb1-42e4-950c-7a1be8dc1c33",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Validacao erro de API",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao erro de Api",
            "action": "Erro | {{currentDateTime}} | {{contact.phoneNumber}} | {{contact.extras.CPF}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["Gerar Barcode", "Gerar Boleto"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            }
          ]
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-75898058-0571-4f00-b6f7-c785db204607",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-b248eb31-4a47-44c2-9de1-7bdc768a2651",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-91f35831-e5d3-4057-9247-dfd735b78b52",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-71c02baa-38a2-4012-9750-6c2a4ff50515",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "294e957c-f15c-4cf7-a940-76de1ce022aa",
      "root": false,
      "$title": "Erro API",
      "$position": {
        "top": "198px",
        "left": "4746.5px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7965a23d-ed39-48ae-adef-a7dc04f8b5fd": {
      "$contentActions": [
        {
          "action": {
            "$id": "f86f3972-4606-4531-99c8-56ae17928b58",
            "type": "SendMessage",
            "settings": {
              "id": "f98a4eb5-25ee-4fe7-bf30-07a54958dddd",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "f98a4eb5-25ee-4fe7-bf30-07a54958dddd",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "9c7be5da-d973-4e63-853b-0d214d3ede9a",
            "type": "SendMessage",
            "settings": {
              "id": "0d6ceddd-2b58-4b0d-9d6d-0c73fb83ec0f",
              "type": "text/plain",
              "content": "Essa informação é necessária para emitirmos a sua segunda via.\n\nComo você quer continuar?\n*1-* Tentar novamente\n*2-* Finalizar",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "0d6ceddd-2b58-4b0d-9d6d-0c73fb83ec0f",
                "type": "text/plain",
                "content": "Essa informação é necessária para emitirmos a sua segunda via.\n\nComo você quer continuar?\n*1-* Tentar novamente\n*2-* Finalizar"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "340566de-10da-4ffa-9f27-f80ec01a4ca7",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "01c61717-f212-48ef-96a0-cbbe8cadc9ad",
          "$connId": "con_348",
          "$id": "92c41c3e-303d-4311-8bcd-e7dbf03a6d01",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Tentar novamente"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_353",
          "$id": "f13910c3-8059-4c93-8660-8f2f2a46b2ec",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Finalizar"],
              "variable": "intentInput"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_358",
          "$id": "ec5896d2-495c-44dd-a7ca-fa531b28cbba",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "fbcded2c-0aeb-487c-8db0-638ef2b3f6a8",
          "type": "TrackEvent",
          "$title": "Nao quero falar meu cpf boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao quero falar meu cpf boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        },
        {
          "$id": "f6e0717f-c2d5-4073-a293-391bc12352a1",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "CPF"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "55fe1202-4ffb-4402-a8dc-2e3cbb270800",
          "type": "ExecuteScript",
          "$title": "Definir Ação",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let opcoesMenu = {\n        \"1\": \"Tentar novamente\",\n        \"2\": \"Finalizar\"\n    };\n\n    let menuRegex = {\n        \"1\": \"tentar novamente|outra vez|^1$\",\n        \"2\": \"finalizar|encerrar|sair|^2$\"\n    };\n\n\n    for (var prop in menuRegex){\n        var match = input.match(new RegExp(menuRegex[prop], \"i\"));\n\n        if(match){\n            return opcoesMenu[prop];\n        }\n    }\n\n    return \"Input inesperado\";\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentInput",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "3075931f-be91-4e73-9767-b7f602362b13",
          "type": "ExecuteScript",
          "$title": "Define RedirectFlow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "209fdc59-b318-4a94-a3dd-34d6a5a24dc4",
          "type": "TrackEvent",
          "$title": "Nao quero falar meu cpf boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao quero falar meu cpf boleto selecao",
            "action": "{{intentInput}}"
          },
          "conditions": []
        },
        {
          "$id": "dc7b38dc-1403-4176-b6db-237a796f0ac0",
          "type": "TrackEvent",
          "$title": "Nao quero falar meu cpf boleto input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao quero falar meu cpf boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentInput",
              "values": ["Input inesperado"]
            }
          ]
        },
        {
          "$id": "ed191ebe-c850-4866-9746-cd23cac0a8ef",
          "type": "SetVariable",
          "$title": "Definir origem",
          "$invalid": false,
          "settings": {
            "variable": "Origem",
            "value": "Não informar CPF"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-5983abe5-60ce-4f14-b20f-a8ba29fa5e7a",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-26c18a92-7bea-401c-9f21-db49048abdc6",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-381fbd6f-c921-4be1-a9d0-91e5913c5ec5",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e43ad48b-c61a-4489-8c13-742241a6997b",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-97b33cd7-c782-4c26-8694-7ff17ef65d32",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "7965a23d-ed39-48ae-adef-a7dc04f8b5fd",
      "root": false,
      "$title": "Não quero informar CPF",
      "$position": {
        "top": "709px",
        "left": "1422px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "14467001-99de-467d-ae9b-72a1fa5deff0": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "dcfd601f-412f-47ef-a276-869070fe0082",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "ddd1e3e7-bef0-4f78-9e77-86d4c7dd5311",
          "type": "Redirect",
          "$title": "Redireciona ao NLP",
          "$invalid": false,
          "settings": {
            "context": {
              "type": "text/plain",
              "value": "{{input.content}} | {{config.botName}} | {{contact.serialized}} | {{input.type}} | {{errorType}} | {{blockAttendanceOrigin}}"
            },
            "address": "NLP"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-3c5c2271-561f-4535-8446-bcb57b8bbae1",
          "label": "Redirect",
          "background": "#1EA1FF",
          "canChangeBackground": false
        }
      ],
      "id": "14467001-99de-467d-ae9b-72a1fa5deff0",
      "root": false,
      "$title": "[Redirect] FAQ/NLP",
      "$position": {
        "top": "322px",
        "left": "5078px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "eb0c42cc-197e-424a-b74a-90f18a3de3e3": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "926649d0-100a-4272-b2e6-1473f5da56b8",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "typeOfStateId": "state",
          "$connId": "con_363",
          "$id": "3364d63f-d598-46e0-9efd-d42b8fbd13c4",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["nok"],
              "variable": "apiOkStatusTracking"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b32af699-1c34-4eae-8bb8-33fa02361d0d",
          "$connId": "con_368",
          "$id": "ba97cbc2-fa28-4f09-9aec-b65c6deb4f57",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "responseBarcodeStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "values": ["201"],
              "variable": "responseBarcodeBody@code"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "$connId": "con_373",
          "$id": "f906b12d-95fb-47cd-a8de-fed263c3b3f3",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "responseBarcodeStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseBarcodeBody@code",
              "values": ["500"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "7a06e9f9-65c6-421b-b493-c04efd8d6eae",
          "$connId": "con_378",
          "$id": "c98cded9-4ab5-4935-8aea-61b43bd3c528",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "responseBarcodeStatus"
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseBarcodeBody@barcode",
              "values": ["null"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "$connId": "con_383",
          "$id": "b02af3b9-66e7-41d5-a64d-4f5ab0fe0f50",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "responseBarcodeStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseBarcodeBody@barcode",
              "values": ["null"]
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "9de0121d-2005-4051-8c7b-e94839f176ba",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Reset \"responseBarcodeBody\"",
          "$invalid": false,
          "settings": {
            "variable": "responseBarcodeBody"
          },
          "conditions": []
        },
        {
          "$id": "00276f82-23da-4862-bac6-751d3a29876f",
          "type": "ProcessHttp",
          "$title": "Requisição Barcode",
          "$invalid": false,
          "settings": {
            "headers": {},
            "method": "POST",
            "body": "{\n    \"document\": \"{{contact.extras.CPF}}\",\n    \"contractId\": {{contractNumber}},\n    \"installment\": {{contractInstallment}},\n    \"clearOldBillet\":true ,\n    \"paytBeforeDueDate\": true,\n    \"payOffContract\": false \n}",
            "uri": "{{config.urlApi}}/api/Contract/contract-barcode",
            "responseStatusVariable": "responseBarcodeStatus",
            "responseBodyVariable": "responseBarcodeBody"
          },
          "conditions": []
        },
        {
          "$id": "285a9fbd-7e1d-4fda-b245-23e423ee3c08",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "process apiOkStatusTracking",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "    const run = (status, response) =>\n    {\n        if (!status || status > 299) return \"nok\";\n        if (!response) return \"nok\";\n\n        let parsedResponse = JSON.parse(response);\n        if (!parsedResponse.code || parsedResponse.code > 299) return \"nok\";\n\n        return \"ok\";\n    }",
            "inputVariables": ["responseBarcodeStatus", "responseBarcodeBody"],
            "outputVariable": "apiOkStatusTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "ee457e20-3005-4cd3-abe4-e6b06a5dc020",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[TEMP] process apiErrorTracking barcode",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responseBarcodeStatus, responseBarcodeBody) {\n    let ok = okStatus(responseBarcodeStatus, responseBarcodeBody);\n\n    return `Gerar Barcode|/api/Contract/contract-barcode|${ok}|{{responseBarcodeStatus}}|{{responseBarcodeBody}}|{\\\"document\\\": \\\"{{contact.extras.CPF}}\\\",\\\"contractId\\\": {{contractNumber}},\\\"installment\\\": {{contractInstallment}},\\\"clearOldBillet\\\":true ,\\\"paytBeforeDueDate\\\": true,\\\"payOffContract\\\": false }`;\n}\n\nconst okStatus = (status, response) => {\n    if (!status || status > 299) return \"nok\";\n    if (!response) return \"nok\";\n\n    let parsedResponse = JSON.parse(response);\n    if (parsedResponse.code > 299) return \"nok\";\n    \n    if ((parsedResponse.barcode == null || parsedResponse.barcode == \"\") &&\n        (parsedResponse.message == null || parsedResponse.message == \"\"))\n    {\n        return \"nok\";\n    }\n\n    return \"ok\";\n}",
            "inputVariables": ["responseBarcodeStatus", "responseBarcodeBody"],
            "outputVariable": "apiErrorTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "7dcd0cb5-a3e0-402f-8e94-05c8c99a050d",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Retorno api generico",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Retorno api generico",
            "action": "{{apiErrorTracking}}"
          },
          "conditions": []
        },
        {
          "$id": "7d472853-61b8-43d4-874b-755f18b51408",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Create Request Body",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(installment,contractId,cpf) {\n    return {\n        document: cpf.toString(),\n        contractId : contractId,\n        fgAllInstallments : false,\n        fgDischarge : false,\n        installments : [ installment ]\n    }\n}",
            "inputVariables": ["contractInstallment", "contractNumber", "contact.extras.CPF"],
            "outputVariable": "pfdBilletRequest",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "d1d01682-99e0-4ca0-b2eb-00084f2a30da",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Reset \"responsePdfBilletBody\"",
          "$invalid": false,
          "settings": {
            "variable": "responsePdfBilletBody"
          },
          "conditions": []
        },
        {
          "$id": "dded07d5-cfd9-4af4-ac4b-16a8174a0772",
          "$typeOfContent": "",
          "type": "ProcessHttp",
          "$title": "Requisição Boleto PDF",
          "$invalid": false,
          "settings": {
            "headers": {},
            "method": "POST",
            "body": "{{pfdBilletRequest}}",
            "uri": "{{config.urlApi}}/api/Contract/billets",
            "responseStatusVariable": "responsePdfBilletStatus",
            "responseBodyVariable": "responsePdfBilletBody"
          },
          "conditions": []
        },
        {
          "$id": "6fabe7f2-0cb7-4662-9ce1-2eca5e696e8a",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "[TEMP] process apiErrorTracking pdfBillet",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responsePdfBilletStatus) {\n    let ok = responsePdfBilletStatus == 200 ? 'ok' : 'nok';\n    return `Gerar Boleto|/api/Contract/billets|${ok}|{{responsePdfBilletStatus}}|{{responsePdfBilletBody}}|{{pfdBilletRequest}}`;\n}",
            "inputVariables": ["responsePdfBilletStatus"],
            "outputVariable": "apiErrorTracking",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "138e3a80-7429-429b-b419-f15ddde0bfc4",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Retorno api generico",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Retorno api generico",
            "action": "{{apiErrorTracking}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "a05e776e-2ef9-4845-8872-a1190a6f3030",
          "type": "SetVariable",
          "$title": "Definir timesPassed",
          "$invalid": false,
          "settings": {
            "variable": "timesPassedBoleto",
            "value": "{{timesPassedBoleto}}1"
          },
          "conditions": []
        },
        {
          "$id": "7d575249-65f8-40eb-a1b7-dc26c4b6a29b",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Date",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run() {\n    try {\n        return new Date().toLocaleString();\n    } catch(ex){\n        return \"\"\n    }\n}",
            "inputVariables": [],
            "outputVariable": "currentDateTime",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "88992a89-261f-4f11-ac8d-2d304835f199",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Validacao erro de API",
          "$invalid": false,
          "settings": {
            "extras": {},
            "action": "Ok | {{currentDateTime}} | {{contact.phoneNumber}} | {{contact.extras.CPF}}",
            "category": "Validacao erro de Api"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "responseBarcodeStatus",
              "values": ["200"]
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseBarcodeBody@code",
              "values": ["500"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "responseBarcodeBody@barcode",
              "values": ["null"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-cdc048a4-a255-422c-8e8a-cb50130f88f8",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-0a40caca-ab28-4c94-bf8c-33ed76ae2afc",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8de4d6e9-b4cb-4375-be89-297b4b7c29a2",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f9bb526b-fc16-419a-90e5-0e32e140c8dc",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        }
      ],
      "id": "eb0c42cc-197e-424a-b74a-90f18a3de3e3",
      "root": false,
      "$title": "Gerar Barcode",
      "$position": {
        "top": "1272px",
        "left": "3484px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "99b8d73a-d833-4cdc-8d2b-9e1e7edf0b7c": {
      "$contentActions": [
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "c4543fcb-085e-44cf-bf01-ac1c329e242f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "22b038c7-c7b5-4a89-ab4a-4a48e7ca653c",
          "type": "MergeContact",
          "$title": "Definir fila = Renegociação",
          "$invalid": false,
          "settings": {
            "extras": {
              "Fila": "Renegociação"
            }
          },
          "conditions": []
        },
        {
          "$id": "3290f369-d91f-4bfc-932b-0bf1a637afd8",
          "type": "TrackEvent",
          "$title": "Negociacao validacao contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao validacao contrato",
            "action": "Nao possui contratos"
          },
          "conditions": []
        },
        {
          "$id": "a4dee37a-38ee-457f-9826-d2985f1cfb58",
          "type": "TrackEvent",
          "$title": "Negociacao nao possui contratos exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao nao possui contratos exibicao",
            "action": "Template com transbordo"
          },
          "conditions": []
        },
        {
          "$id": "9b845ff9-12ee-4bf4-990c-b10051e12726",
          "type": "TrackEvent",
          "$title": "Validacao de usuario",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario",
            "action": "Nao positivado | NA negociacao com transbordo"
          },
          "conditions": []
        },
        {
          "$id": "f3b6da0e-54fb-4c04-a35e-e782828fcf13",
          "type": "TrackEvent",
          "$title": "Validacao de usuario analitico  de eventos",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Nao positivado | {{origemTrack}}",
            "category": "Validacao de usuario analitico"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "isClient",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "9de65dc5-66f6-43be-a35e-0f92c76cc7d5",
          "type": "TrackEvent",
          "$title": "Validacao de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato",
            "action": "{{contact.extras.CPF}} | Nao tem contrato | NA negociacao com transbordo"
          },
          "conditions": []
        },
        {
          "$id": "d86a6adf-da1b-4a70-9c25-2847cfd85238",
          "type": "SetVariable",
          "$title": "Definir StatusCliente",
          "$invalid": false,
          "settings": {
            "variable": "StatusCliente",
            "value": "Nao positivado"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
        "$invalid": false,
        "typeOfStateId": "state"
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-be121ecf-0a5f-4a30-97a9-1e471594b79a",
          "label": "MergeContact",
          "background": "#FF1E90",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-cc592dd7-203f-49bf-8212-0439cf566b0d",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-6f21a10c-930c-4a3c-a6de-d2b4e30728d1",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        }
      ],
      "id": "99b8d73a-d833-4cdc-8d2b-9e1e7edf0b7c",
      "root": false,
      "$title": "Inválido(Transbordo)",
      "$position": {
        "top": "1253.14px",
        "left": "290.571px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "2dcc070b-d027-4cbf-9f4f-53591c766348": {
      "$contentActions": [
        {
          "action": {
            "$id": "919e7e4c-5e30-41e0-bd40-9371d286142b",
            "type": "SendMessage",
            "settings": {
              "id": "723e5182-a074-4594-88f5-c41091818415",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "723e5182-a074-4594-88f5-c41091818415",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "a8d441ad-db8d-4067-8f30-06ca475c4263",
            "type": "SendMessage",
            "settings": {
              "id": "d2b33e98-8dfe-4baf-945d-8dac15d49b91",
              "type": "text/plain",
              "content": "Poxa, me desculpe. ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "d2b33e98-8dfe-4baf-945d-8dac15d49b91",
                "type": "text/plain",
                "content": "Poxa, me desculpe. "
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "2e6cbc69-34ef-4e5a-9b52-1b75277215b1",
            "type": "SendMessage",
            "settings": {
              "id": "79c1bc94-fda4-4669-9e7d-0c3cebdf678e",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "79c1bc94-fda4-4669-9e7d-0c3cebdf678e",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "486f9fd0-feb0-44a9-a2c6-fdc0df56dfa0",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{\n    \"recipient_type\": \"individual\",\n    \"type\": \"interactive\",\n    \"interactive\": {\n        \"type\": \"button\",\n        \"body\": {\n            \"text\": \"Poxa, me desculpe.\n\n*Posso chamar um atendente* para que ele te ajude?\"\n        },\n        \"action\": {\n          \"buttons\":[\n            {\n              \"type\": \"reply\",\n              \"reply\": {\n                \"id\": \"1\",\n                \"title\": \"Sim, pode\" \n              }\n            },\n            {\n              \"type\": \"reply\",\n              \"reply\": {\n                \"id\": \"2\",\n                \"title\": \"Não\" \n              }\n            }\n          ] \n        }\n    }\n}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "58a7e1b6-ce07-463a-bbde-c65810720fd3",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_388",
          "$id": "d87c46ee-d610-4d40-924a-c09f8bad68c2",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["NoCampaing"],
              "variable": "campaing"
            }
          ],
          "$invalid": false,
          "typeOfStateId": "state"
        },
        {
          "stateId": "842d1686-036a-48d0-b165-03f5c248198a",
          "$connId": "con_393",
          "$id": "91101b55-62e1-4937-9295-c1045949fc40",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Negation", "Thank", "GoodBye"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
          "$connId": "con_398",
          "$id": "ff94a614-71c6-4524-a9f8-7190bcfc3f2a",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["200"],
              "variable": "smallTalksStatus"
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "smallTalksBody@result",
              "values": ["Positive", "Confirmation"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b4d0a5c8-7f8e-4e3d-b6a2-7d6ae49577bd",
          "$connId": "con_403",
          "$id": "072a5548-24fe-4934-989c-240b995d10bb",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["Pode", "Sim pode"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "842d1686-036a-48d0-b165-03f5c248198a",
          "$connId": "con_408",
          "$id": "b72b4980-d154-41bd-94f5-b878a837ba68",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_413",
          "$id": "227393c6-c316-4a24-8aa8-aed3fceac91f",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "621bc6a4-b148-42bb-8d31-147d6781846b",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar selecao",
            "action": "Nao"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "isAtivation"
            }
          ]
        },
        {
          "$id": "96b4332a-1c1d-4ab5-bcb0-ad4ee5597ab2",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "7ca3487f-8cd7-4f2c-8fb9-a190ac621038",
          "type": "ProcessHttp",
          "$title": "Requisição SmallTalks",
          "$invalid": false,
          "settings": {
            "headers": {
              "AuthenticationKey": "{{config.authKey}}"
            },
            "method": "GET",
            "uri": "{{config.urlApi}}/Smalltalks/Analyze?input={{input.content}}",
            "responseStatusVariable": "smallTalksStatus",
            "responseBodyVariable": "smallTalksBody"
          },
          "conditions": []
        },
        {
          "$id": "940b6614-3319-4440-878e-82b9df60a0ec",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo selecao | SIM",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo selecao",
            "action": "Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Confirmation"],
              "variable": "smallTalksBody@result"
            }
          ]
        },
        {
          "$id": "530ccc8d-e3dd-4352-966b-d4ef46e114b9",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo selecao | Nao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo selecao",
            "action": "Nao"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Negation"],
              "variable": "smallTalksBody@result"
            }
          ]
        },
        {
          "$id": "81f9f8e1-8885-498d-a906-4e714a5c2e93",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo selecao| Inesperado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo selecao",
            "action": "Input inesperado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "smallTalksBody@result",
              "values": ["Confirmation", "Negation"]
            }
          ]
        },
        {
          "$id": "eb90255d-467a-437e-970a-315ed54e1c07",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo selecao | inesperado",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo selecao",
            "action": "Input inesperado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["204"],
              "variable": "smallTalksStatus"
            }
          ]
        },
        {
          "$id": "b87ae463-aaa8-4696-822b-d4ee7d0f5e1e",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["204"],
              "variable": "smallTalksStatus"
            }
          ]
        },
        {
          "$id": "fa27a2ac-1f3b-4d2b-bd80-e547bbc4f4bf",
          "type": "TrackEvent",
          "$title": "Nao ajudou com transbordo input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou com transbordo input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "smallTalksBody@result",
              "values": ["Confirmation", "Negation"]
            }
          ]
        },
        {
          "$id": "1eda2eff-9941-452d-9bcb-4de767e96cea",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-870c92fe-0d6f-40fb-8b11-b380150dd609",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-fc0e624d-7a22-460e-bd74-9d1a45baa2eb",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-79598158-4296-44fd-bae4-fa18e2060e15",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-23aa765c-b84d-44cf-9f53-24ea9cbd7ce5",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-88fd84ff-4bdf-4b0d-8a33-72d937266b0c",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "2dcc070b-d027-4cbf-9f4f-53591c766348",
      "root": false,
      "$title": "[Menu] Chamar Atendente",
      "$position": {
        "top": "1270px",
        "left": "1928px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "972c8952-72b8-4b45-b795-f05d0b4e4ec7": {
      "$contentActions": [
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "af727188-5e10-4138-8848-f00084fc0d19",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-44700bad-4c7f-497c-88ac-47eee3cbed16",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "972c8952-72b8-4b45-b795-f05d0b4e4ec7",
      "root": false,
      "$title": "Despedida",
      "$position": {
        "top": "735px",
        "left": "4734px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "3e383d8c-ad5d-4f38-a2de-8cb76de9484c": {
      "$contentActions": [
        {
          "action": {
            "$id": "95b4c35a-ad16-4ee6-82a2-a78a3ef1b31f",
            "type": "SendMessage",
            "settings": {
              "id": "a3df73b5-1e1c-433b-82f0-91af0d5dc769",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "a3df73b5-1e1c-433b-82f0-91af0d5dc769",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "1c0c6034-99f9-4cbc-9121-b8c1da84e62c",
            "type": "SendMessage",
            "settings": {
              "id": "94206490-83c0-4e2a-afaa-9e5acc283063",
              "type": "text/plain",
              "content": "Ops, infelizmente eu não consegui gerar o boleto para você 😕 ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "94206490-83c0-4e2a-afaa-9e5acc283063",
                "type": "text/plain",
                "content": "Ops, infelizmente eu não consegui gerar o boleto para você 😕 "
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "48558c9e-9aa4-483a-b08e-f96269ac5899",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "2e123ccd-86a7-4f19-9f49-6f6a0a496ac4",
          "type": "TrackEvent",
          "$title": "Negociacao validacao contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao validacao contrato",
            "action": "Nao possui contratos"
          },
          "conditions": []
        },
        {
          "$id": "aadf392c-1e89-4514-bb9e-823889dd233a",
          "type": "TrackEvent",
          "$title": "Negociacao nao possui contratos exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao nao possui contratos exibicao",
            "action": "Template sem transbordo"
          },
          "conditions": []
        },
        {
          "$id": "178fabcf-8e6e-4d24-a939-db9f1775d505",
          "type": "SetVariable",
          "$title": "Definir sem contrato",
          "$invalid": false,
          "settings": {
            "variable": "semContrato",
            "value": "true"
          },
          "conditions": []
        },
        {
          "$id": "14349b51-5278-4ebd-9337-b99c2dee5d82",
          "type": "TrackEvent",
          "$title": "Validacao de usuario",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de usuario",
            "action": "Nao positivado | NA negociacao sem transbordo"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "isAtivation",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "b44f77f1-52fe-4b4d-9f2c-d9e435bc555e",
          "type": "TrackEvent",
          "$title": "Validacao de usuario analitico",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Nao positivado | {{origemTrack}}",
            "category": "Validacao de usuario analitico"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "isClient",
              "values": ["true"]
            }
          ]
        },
        {
          "$id": "e98cb6d0-1212-4ad7-af46-56e4127f476f",
          "type": "TrackEvent",
          "$title": "Validacao de contrato",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Validacao de contrato",
            "action": "{{contact.extras.CPF}} | Nao tem contrato | NA negociacao sem transbordo"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "11b90226-5105-43b6-a968-c606ad6c78fa",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-cb0f6395-c2b2-4983-934a-8888e4d9a950",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-678210a8-e3d8-4774-9277-0e7548b1c95c",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-1a6aba91-6529-4a92-ba05-0646ed8efebd",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "3e383d8c-ad5d-4f38-a2de-8cb76de9484c",
      "root": false,
      "$title": "Sem contrato NA",
      "$position": {
        "top": "1262.14px",
        "left": "736.571px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "647b99c3-904e-4fca-8563-8f24b944df10": {
      "$contentActions": [
        {
          "action": {
            "$id": "064f0759-38e1-45f5-8b3e-8ba03e58f3fc",
            "type": "SendMessage",
            "settings": {
              "id": "84b0d7b2-e45a-4624-b85a-d4b4b597c030",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "84b0d7b2-e45a-4624-b85a-d4b4b597c030",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8c61d28c-4993-4a51-abed-dff1772b5e4b",
            "type": "SendMessage",
            "settings": {
              "id": "8869513e-be13-4f01-8829-d3ee2242c6ca",
              "type": "text/plain",
              "content": "Ops, infelizmente eu não consegui gerar o boleto para você 😕  ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "8869513e-be13-4f01-8829-d3ee2242c6ca",
                "type": "text/plain",
                "content": "Ops, infelizmente eu não consegui gerar o boleto para você 😕  "
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "5ae3f85d-a7ea-4374-8846-be35d6f7d23b",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "4c088087-c571-46e0-96db-a9b2bde64c04",
          "type": "TrackEvent",
          "$title": "Contratos bloqueados negociacao exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Contratos bloqueados negociacao exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | negocie_sem_transbordo_s4"
          },
          "conditions": []
        },
        {
          "$id": "31b06336-c1c0-4079-90a1-47570143d23f",
          "type": "SetVariable",
          "$title": "Definir bloqueada",
          "$invalid": false,
          "settings": {
            "variable": "bloqueada",
            "value": "true"
          },
          "conditions": []
        },
        {
          "$id": "c25362e7-39f4-47d0-8614-226ed08bfe76",
          "type": "TrackEvent",
          "$title": "Contratos bloqueado exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}}",
            "category": "Contratos bloqueado exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "11b90226-5105-43b6-a968-c606ad6c78fa",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-052a02a3-6144-45a4-9812-e58e6472f471",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-f6098ef7-392c-4838-9619-ee9f0fa6d92c",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-608aaf1a-3c50-41c0-9f4f-6031275bb3b3",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "647b99c3-904e-4fca-8563-8f24b944df10",
      "root": false,
      "$title": "Parcela bloqueada sem transbordo",
      "$position": {
        "top": "1286px",
        "left": "4207px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "7ce60d51-79d8-426e-a912-37a0074fd08a": {
      "$contentActions": [
        {
          "action": {
            "$id": "2c05360f-1ddf-4968-a5a0-f3a2955ba05f",
            "type": "SendMessage",
            "settings": {
              "id": "c6a39230-5c49-4be6-ba91-6fa426e6ebc5",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "c6a39230-5c49-4be6-ba91-6fa426e6ebc5",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8fb79918-4d23-47cf-8560-eba824c883fd",
            "type": "SendMessage",
            "settings": {
              "id": "a849abdd-1f37-45a9-a82c-3abdf0eea8e2",
              "type": "text/plain",
              "content": "Poxa, me desculpe 😞\n\nAinda estou em treinamento e realmente fiz o possível para conseguir te ajudar. ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "a849abdd-1f37-45a9-a82c-3abdf0eea8e2",
                "type": "text/plain",
                "content": "Poxa, me desculpe 😞\n\nAinda estou em treinamento e realmente fiz o possível para conseguir te ajudar. "
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "e589d7a0-5f1e-4796-b6ac-65f5f486e179",
            "type": "SendMessage",
            "settings": {
              "id": "77f06a1f-6b55-4d52-b0a3-72325fa7b56a",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "77f06a1f-6b55-4d52-b0a3-72325fa7b56a",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "dfcabc83-452c-48f9-927d-c6bff2c2e68f",
            "type": "SendMessage",
            "settings": {
              "id": "e57c600b-8de3-4e8b-a409-44b741326dff",
              "type": "text/plain",
              "content": "Lembrando que a renegociação pode ser feita diretamente no site da nossa parceira Negocie Digital. Para isso, é só seguir os passos👇\n\n- Acesse o link bit.ly/339mOph\n- Informe o número do seu CPF\n- Você receberá um SMS com um código para acessar os detalhes da sua dívida\n- Selecione o seu contrato com a Sim\n\nPronto! Agora é só escolher a melhor opção para pagamento e gerar os boletos.",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "e57c600b-8de3-4e8b-a409-44b741326dff",
                "type": "text/plain",
                "content": "Lembrando que a renegociação pode ser feita diretamente no site da nossa parceira Negocie Digital. Para isso, é só seguir os passos👇\n\n- Acesse o link bit.ly/339mOph\n- Informe o número do seu CPF\n- Você receberá um SMS com um código para acessar os detalhes da sua dívida\n- Selecione o seu contrato com a Sim\n\nPronto! Agora é só escolher a melhor opção para pagamento e gerar os boletos."
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "75615437-c878-4409-9a7b-073eb2e68295",
            "type": "SendMessage",
            "settings": {
              "id": "30b1d1a4-56e0-4609-8def-1a501571cf4e",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "30b1d1a4-56e0-4609-8def-1a501571cf4e",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "0eb11687-22c9-4ee5-b1e9-a7a9a0fb5033",
            "type": "SendMessage",
            "settings": {
              "id": "15e7504f-5ddc-4cd0-b42e-6bec34a1da17",
              "type": "text/plain",
              "content": "Agora, conta para mim, o que faltou para que o meu atendimento fosse melhor? ",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "15e7504f-5ddc-4cd0-b42e-6bec34a1da17",
                "type": "text/plain",
                "content": "Agora, conta para mim, o que faltou para que o meu atendimento fosse melhor? "
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "c2f96daa-fe35-4fd3-99a1-8cf1054d6d4a",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fd8bab4d-ae47-4f7b-80d0-52493f22eb1d",
          "$connId": "con_418",
          "$id": "db3c68fd-584b-4f4d-846c-f67634c5ddcf",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_423",
          "$id": "536e0e90-6e8e-4d5b-9599-271abb267654",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "45661fc2-dbd5-4ee0-9798-734886d9fd45",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar selecao",
            "action": "Nao"
          },
          "conditions": []
        },
        {
          "$id": "9a0b8569-c642-4a53-b289-ea9d713a07dd",
          "type": "TrackEvent",
          "$title": "Nao ajudou sem transbordo exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou sem transbordo exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "79926828-f0c5-48d5-beda-4a5598232188",
          "type": "TrackEvent",
          "$title": "Nao ajudou sem transbordo input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Nao ajudou sem transbordo input",
            "action": "{{input.content}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-2267f7a8-fd9d-4d72-8839-4b1e0f807b7e",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-16bbf8c7-e544-4508-afaa-ad13ba3ac6e7",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-1a622a6d-4997-4661-9539-794e044b8ba3",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "7ce60d51-79d8-426e-a912-37a0074fd08a",
      "root": false,
      "$title": "Nao ajudou NA",
      "$position": {
        "top": "1279px",
        "left": "1666px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "fd8bab4d-ae47-4f7b-80d0-52493f22eb1d": {
      "$contentActions": [
        {
          "action": {
            "$id": "df769403-c17f-4abf-a059-36e58d1ce009",
            "type": "SendMessage",
            "settings": {
              "id": "e87c667a-a7f9-4c25-9b18-3b7b7bfefe97",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "e87c667a-a7f9-4c25-9b18-3b7b7bfefe97",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "03c9d263-d46d-42fb-bd55-3303379b5884",
            "type": "SendMessage",
            "settings": {
              "id": "5aa2c013-26d6-4f15-94e1-cf66237324ef",
              "type": "text/plain",
              "content": "Entendi! Muito obrigada pelo retorno 😊\n\nJá enviei o seu feedback para a nossa equipe!",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "5aa2c013-26d6-4f15-94e1-cf66237324ef",
                "type": "text/plain",
                "content": "Entendi! Muito obrigada pelo retorno 😊\n\nJá enviei o seu feedback para a nossa equipe!"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "09d64fff-ec42-4bcc-b2f4-2d2a315ec263",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "842d1686-036a-48d0-b165-03f5c248198a",
          "$connId": "con_428",
          "$id": "4e7b80e4-4cc1-400b-a877-a45c7b8ff662",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "65d7d7e2-eece-4fbe-9cad-78dc1f2d6812",
          "type": "ExecuteScript",
          "$title": "redirectflow",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(flow) {\n    try {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n    catch (e) {\n        return {\n            isFaq: false,\n            redirectFlow: '[Inicio Regular] - Algo Mais',\n            flow: flow\n        };\n    }\n}",
            "inputVariables": ["contact.extras.Fluxo"],
            "outputVariable": "redirectObject",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "842d1686-036a-48d0-b165-03f5c248198a",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-664e23a0-79ed-419c-ac7a-140beba21531",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ecf41a5b-627a-476c-97f7-55d8bccb8590",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "fd8bab4d-ae47-4f7b-80d0-52493f22eb1d",
      "root": false,
      "$title": "Agradecimento NA",
      "$position": {
        "top": "325px",
        "left": "4742px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "842d1686-036a-48d0-b165-03f5c248198a": {
      "$contentActions": [
        {
          "action": {
            "$id": "6382de2e-407d-4033-9700-a763c6b599a1",
            "type": "SendMessage",
            "settings": {
              "id": "59ad6b86-2c22-4d8c-88bb-3d98ff54437e",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "59ad6b86-2c22-4d8c-88bb-3d98ff54437e",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "f47d4207-8753-4dd5-a51a-f57b869a9e29",
            "type": "SendMessage",
            "settings": {
              "id": "136407dc-596a-44ce-b0ec-3f8dc171b622",
              "type": "text/plain",
              "content": "Se precisar de mim novamente, estou à disposição! \n\nAté mais! 👋",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "136407dc-596a-44ce-b0ec-3f8dc171b622",
                "type": "text/plain",
                "content": "Se precisar de mim novamente, estou à disposição! \n\nAté mais! 👋"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "60b0397a-2e69-42ba-9d46-f090a96bea4f",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "fallback",
          "$connId": "con_433",
          "$id": "3c42aafd-0d61-485f-b63b-9de34ffb3661",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["NoCampaing"],
              "variable": "campaing"
            }
          ],
          "$invalid": false,
          "typeOfStateId": "state"
        },
        {
          "stateId": "48fd3762-bf9a-42f2-8f7a-39e6a57a8f9f",
          "$connId": "con_438",
          "$id": "11a43660-e8fb-4cd9-9d31-bda961c49078",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_443",
          "$id": "c0516dbc-ca6c-45ab-bb14-ab184a81f8ef",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "300b3283-a00f-4f46-90e3-930517d43a5b",
          "type": "TrackEvent",
          "$title": "Negociacao finalizacao exibicao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao finalizacao exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        },
        {
          "$id": "94aa7e5f-ec93-46a4-b832-972e2dd02f4c",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar selecao",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar selecao",
            "action": "Input inesperado"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "blocoConseguiAjudar"
            }
          ]
        },
        {
          "$id": "1394b033-9bc7-4036-842a-4e470084b5e6",
          "type": "TrackEvent",
          "$title": "Negociacao consegui ajudar input",
          "$invalid": false,
          "settings": {
            "extras": {
              "Status Cliente": "{{StatusCliente}}"
            },
            "category": "Negociacao consegui ajudar input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["true"],
              "variable": "blocoConseguiAjudar"
            }
          ]
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "fa9a7fe9-6ea2-41e2-aa29-464faffd1cb5",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-5f12ae65-39db-4b33-a0b6-6fa622589af5",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8de7f789-3f08-4b35-8c7f-3df622760461",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-c427918d-2543-426c-baf0-15ec56929c70",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d7eff363-8ec1-43d2-aa48-c5011ca19604",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "842d1686-036a-48d0-b165-03f5c248198a",
      "root": false,
      "$title": "Despedida NA",
      "$position": {
        "top": "600px",
        "left": "4740px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "a437c1e5-a319-4f23-a1bb-1a7fa43bb516": {
      "$contentActions": [
        {
          "action": {
            "$id": "2349cb24-1eb6-4126-8807-1a1777c00128",
            "type": "SendMessage",
            "settings": {
              "id": "89f175b9-80c4-4759-85ac-b7437b2589e2",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "89f175b9-80c4-4759-85ac-b7437b2589e2",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "8b858a5c-7af8-41c6-b5a2-b15a31905c3c",
            "type": "SendMessage",
            "settings": {
              "id": "9cc556f3-6067-4c82-ba93-beb7cb3d7ad0",
              "type": "text/plain",
              "content": "Se você quiser, podemos adiantar o boleto de outra data:\n\n*1-* Escolher boleto de outra data\n*2-* Não, obrigado",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "9cc556f3-6067-4c82-ba93-beb7cb3d7ad0",
                "type": "text/plain",
                "content": "Se você quiser, podemos adiantar o boleto de outra data:\n\n*1-* Escolher boleto de outra data\n*2-* Não, obrigado"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "1fe6914a-c9ef-4996-9d33-18dff6985754",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "877df1b8-02bd-4b2e-b8b8-4b7a4642aa16",
          "$connId": "con_448",
          "$id": "a0e269e9-1ab2-4a7d-911c-b64620687957",
          "conditions": [
            {
              "source": "context",
              "comparison": "greaterThan",
              "variable": "amountBoleto",
              "values": ["1"]
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentAction",
              "values": ["Escolher boleto de outra data"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "46a962b5-4b9d-40f9-8e68-cdc212f1f21e",
          "$connId": "con_453",
          "$id": "463295a0-b2c0-428d-88e2-3b60c62510d0",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Escolher boleto de outra data"],
              "variable": "intentAction"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b639155c-7893-4432-83f0-89b1b708af41",
          "$connId": "con_458",
          "$id": "cce6afef-fd49-4eec-ac77-f9360d96b5fb",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Não,obrigado"],
              "variable": "intentAction"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_463",
          "$id": "0958c8c9-e08b-4203-989e-77b880fdd704",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "dc4b476d-414f-427c-a237-c3d83a25d7d1",
          "type": "SetVariable",
          "$title": "Definir lastquestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Adiantar boleto"
          },
          "conditions": []
        },
        {
          "$id": "33d34e9f-3883-4439-a82d-1e85c66c95c5",
          "type": "TrackEvent",
          "$title": "Adiantar boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Adiantar boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "d9206aa9-4267-43c3-9afb-c6d89faffa99",
          "type": "ExecuteScript",
          "$title": "Get IntentAction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let removeDigits = /\\d+/g;\n    let aux = \"\";\n    const invalid = \"Input inesperado\";\n\n    try {\n        if (removeDigits.test(input)) {\n            var numbers = input.match(removeDigits);\n            for (var i = 0; i < numbers.length; i++) {\n                aux += numbers[i];\n            }\n            if (aux.length != 1) {\n                return invalid;\n            }\n        }\n\n        const optionsRegex = {\n            \"(1|^Escolher boleto de outra data|^Escolher|^Outra data)\" : \"Escolher boleto de outra data\",\n            \"(2|^Não, obrigado|^N(a|ã)o)\" : \"Não,obrigado\",          \n        };\n\n        let intentAction = Object.keys(optionsRegex).find(k => (new RegExp(k, \"i\")).test(input));\n\n        return intentAction == undefined ? invalid : optionsRegex[intentAction];\n\n    }\n    catch (e) {\n        return invalid;\n    }\n    return invalid;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentAction",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "7cb007a6-ed38-4930-8b5c-fb89c4ab7749",
          "type": "TrackEvent",
          "$title": "Validacao segunda vez que gera boleto",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao segunda vez que gera boleto",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}} | Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.extras.CPF"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "contact.phoneNumber"
            },
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "origemTrack"
            }
          ]
        },
        {
          "$id": "fb63d32f-0534-4296-bab0-598635b09390",
          "type": "TrackEvent",
          "$title": "Adiantar boleto input",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Adiantar boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentAction",
              "values": ["Input inesperado"]
            },
            {
              "source": "context",
              "comparison": "exists",
              "variable": "input.content",
              "values": []
            }
          ]
        },
        {
          "$id": "ceafd97b-8cc2-4d02-9402-1c5456cb02b4",
          "type": "TrackEvent",
          "$title": "Adiantar boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Adiantar boleto selecao",
            "action": "{{intentAction}}"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-0ddcf025-f66b-4d3f-9c7c-6cb0eccc6810",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ee575b9b-425b-4515-aef3-aac33b8990e7",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9f8073ec-00eb-40fe-8189-3ea799b3353c",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-7e601d58-556f-44fc-a9fa-970040b6fb03",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-70978601-659d-4c20-904c-e0ebd5af8e4a",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "a437c1e5-a319-4f23-a1bb-1a7fa43bb516",
      "root": false,
      "$title": "[Menu] Adiantar boleto",
      "$position": {
        "top": "1717px",
        "left": "3632px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "46a962b5-4b9d-40f9-8e68-cdc212f1f21e": {
      "$contentActions": [
        {
          "action": {
            "$id": "8fca7cc9-6c6a-4d22-b06c-ffaf553c8b27",
            "type": "SendMessage",
            "settings": {
              "id": "836a8e49-3965-4e0e-a64f-11e90075cf4b",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "836a8e49-3965-4e0e-a64f-11e90075cf4b",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "1311fda0-e710-4be5-85c6-b61dd7e2ac50",
            "type": "SendMessage",
            "settings": {
              "id": "6dca439f-ee73-4edc-bbbe-d66016ab98c5",
              "type": "text/plain",
              "content": "*Escolha uma opção* de boleto para ver os detalhes e o código de barras:\n\n \n*1-* Ultima parcela {{ultimaParcela}}\n*2-* Escolher outra parcela",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "6dca439f-ee73-4edc-bbbe-d66016ab98c5",
                "type": "text/plain",
                "content": "*Escolha uma opção* de boleto para ver os detalhes e o código de barras:\n\n \n*1-* Ultima parcela {{ultimaParcela}}\n*2-* Escolher outra parcela"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "79cdc236-cb52-4885-90d0-f58ae46230fe",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "4f657411-6291-456e-bebd-78039e739010",
          "$connId": "con_468",
          "$id": "af9c3272-f8d7-4ada-9de9-e397a6308ec6",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Última parcela"],
              "variable": "intentAction"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "1044baa2-d036-4174-ad4f-4bf855a05b9a",
          "$connId": "con_473",
          "$id": "45a4306f-f047-4b6c-88b4-07cb741cfc39",
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "values": ["Escolher outra parcela"],
              "variable": "intentAction"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_478",
          "$id": "f534d520-1c4e-4a4f-ad03-8b99bd18bcd2",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "5e65b16d-3f7a-4e99-9fca-e7f6e50e83b5",
          "type": "ExecuteScript",
          "$title": "Process \"ultimaParcela\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(input) {\n                input = JSON.parse(input);\n                return input.installments[input.installments.length - 1].dateDue;; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract"],
            "outputVariable": "ultimaParcela",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "4902f9e5-794d-4545-99c5-79bf3bd0fab6",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Escolher parcela"
          },
          "conditions": []
        },
        {
          "$id": "1f38daec-9a2a-4132-8f0c-6b183c5aa2ef",
          "type": "TrackEvent",
          "$title": "Validacao vindo do fluxo retorno exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao vindo do fluxo retorno exibicao",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | Um contrato | {{origemTrack}} | Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "state.previous.name",
              "values": ["Adiantar boleto"]
            }
          ]
        },
        {
          "$id": "cb17459a-8dc3-427d-95e2-bec0f1f3da5e",
          "type": "TrackEvent",
          "$title": "Opcao de boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Opcao de boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "30ba4661-f9ac-4028-b033-a6be6318f508",
          "type": "ExecuteScript",
          "$title": "Get IntentAction",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(input) {\n    let removeDigits = /\\d+/g;\n    let aux = \"\";\n    const invalid = \"Input inesperado\";\n\n    try {\n        if (removeDigits.test(input)) {\n            var numbers = input.match(removeDigits);\n            for (var i = 0; i < numbers.length; i++) {\n                aux += numbers[i];\n            }\n            if (aux.length != 1) {\n                return invalid;\n            }\n        }\n\n        const optionsRegex = {\n            \"(1|^(ú|u)ltima parcela|^(ú|u)ltima)\" : \"Última parcela\",\n            \"(2|^Escolher outra parcela|^Outra|^escolher)\" : \"Escolher outra parcela\",          \n        };\n\n        let intentAction = Object.keys(optionsRegex).find(k => (new RegExp(k, \"i\")).test(input));\n\n        return intentAction == undefined ? invalid : optionsRegex[intentAction];\n\n    }\n    catch (e) {\n        return invalid;\n    }\n    return invalid;\n}",
            "inputVariables": ["input.content"],
            "outputVariable": "intentAction",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "5a280639-6c49-4e86-84ea-089429f3c9c2",
          "type": "ExecuteScript",
          "$title": "Get last installments",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": " function run(selectedContract) {\n                selectedContract=JSON.parse(selectedContract);\n                return selectedContract.installments[selectedContract.installments.length -1].number ; //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract"],
            "outputVariable": "contractInstallment",
            "LocalTimeZoneEnabled": false
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentAction",
              "values": ["Última parcela"]
            }
          ]
        },
        {
          "$id": "fb3617dc-820d-4e71-b315-f626ba011288",
          "type": "TrackEvent",
          "$title": "Opcao de boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Opcao de boleto selecao",
            "action": "{{intentAction}}"
          },
          "conditions": []
        },
        {
          "$id": "4cb38f8e-ccb3-4946-b2de-57cee46dd25f",
          "type": "TrackEvent",
          "$title": "Opcao de boleto input",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Opcao de boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "intentAction",
              "values": ["Input inesperado"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-4098b694-ec2f-4cbb-a8ff-7727b4e654dc",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8dad89b2-2e5e-4a2e-aed1-23ddb86d8c23",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-4bed68ff-268b-4a9a-8e4d-1de42a679bb7",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-a75bc528-0fb5-44fa-a7c4-03e1486c4f52",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-82efbf4f-19ec-49f8-bd39-375188277f1d",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "46a962b5-4b9d-40f9-8e68-cdc212f1f21e",
      "root": false,
      "$title": "[Menu] Escolher parcela",
      "$position": {
        "top": "412.571px",
        "left": "2453.86px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "1044baa2-d036-4174-ad4f-4bf855a05b9a": {
      "$contentActions": [
        {
          "action": {
            "$id": "24798f8c-f829-4d5e-92f5-cc4a5773d2ce",
            "type": "SendMessage",
            "settings": {
              "id": "c6418bad-fb12-48d7-b00f-1c2ca872f9ca",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "c6418bad-fb12-48d7-b00f-1c2ca872f9ca",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "b3609aaf-6ff4-48b6-baf4-7f4841c1792e",
            "type": "SendMessage",
            "settings": {
              "id": "99a9504a-8851-4725-a096-77d2af63ecb2",
              "type": "text/plain",
              "content": "*Digite em uma mensagem o mês e o ano do boleto,* para ver os detalhes e o código de barras.\n\n*(Exemplo:01/2020)*",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "99a9504a-8851-4725-a096-77d2af63ecb2",
                "type": "text/plain",
                "content": "*Digite em uma mensagem o mês e o ano do boleto,* para ver os detalhes e o código de barras.\n\n*(Exemplo:01/2020)*"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "58026170-8b4f-4ede-841d-f08a3eccb711",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "4f657411-6291-456e-bebd-78039e739010",
          "$connId": "con_483",
          "$id": "1406169e-cf48-4706-8c3e-e1aed55f0e8c",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["undefined"],
              "variable": "contractInstallment"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "ec3ceebb-75ae-4c27-a2f8-a45774e02cc9",
          "$connId": "con_488",
          "$id": "84c73792-38f1-4bd1-82a5-e24e02b4d00b",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_493",
          "$id": "6c39a407-6677-43aa-a62d-f25f9ce94f20",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "781cd609-c608-4665-b7c0-f85a15a85fae",
          "type": "TrackEvent",
          "$title": "Mes e ano boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Mes e ano boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "6bd38ce4-4d0b-4757-8b85-68560db42593",
          "type": "ExecuteScript",
          "$title": "get installment",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(selectedContract,input) {\n                selectedContract = JSON.parse(selectedContract);\n                for( var i = 0;i<selectedContract.installments.length;i++){\n                    if(selectedContract.installments[i].dateDue.includes(input)){\n                        return selectedContract.installments[i].number;\n                    }                  \n                }\n             //Return value will be saved as \"Return value variable\" field name\n            }",
            "inputVariables": ["selectedContract", "input.content"],
            "outputVariable": "contractInstallment",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "1dac9042-beb8-4f9d-838c-371e0dfe3949",
          "type": "TrackEvent",
          "$title": "Mes e ano boleto input",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Mes e ano boleto input",
            "action": "{{input.content}}"
          },
          "conditions": []
        },
        {
          "$id": "0139db5d-87dc-4ed9-b51e-632b0103bd1c",
          "type": "TrackEvent",
          "$title": "Validacao boleto em aberto",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao boleto em aberto",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}}  | {{origemTrack}} | Sim"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "variable": "contractInstallment",
              "values": ["undefined"]
            }
          ]
        },
        {
          "$id": "33acee23-9302-45cb-80d7-13160b6ca39b",
          "type": "TrackEvent",
          "$title": "Validacao boleto em aberto",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Validacao boleto em aberto",
            "action": "{{contact.extras.CPF}} | {{contact.phoneNumber}} | {{origemTrack}} | Não"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "contractInstallment",
              "values": ["undefined"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-dab03ed9-a817-4724-a8c2-f27972ce4dde",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-9950462d-cf7b-441d-b95e-3be31b11df6b",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-6e70260a-1a93-4eca-a4f0-89663d6687cc",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-568623ec-84e5-4da4-a4a5-729f01442107",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "1044baa2-d036-4174-ad4f-4bf855a05b9a",
      "root": false,
      "$title": "[Menu] Outra parcela",
      "$position": {
        "top": "573.286px",
        "left": "2450.14px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "ec3ceebb-75ae-4c27-a2f8-a45774e02cc9": {
      "$contentActions": [
        {
          "action": {
            "$id": "1ee8b995-6587-4c3f-bea6-5f4222e57f79",
            "type": "SendMessage",
            "settings": {
              "id": "9f70e9cb-7446-4ae2-b996-c98dd1996a9a",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "9f70e9cb-7446-4ae2-b996-c98dd1996a9a",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "11249532-ee06-4805-a137-38e269ec582b",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{{templates@erro_segunda_via}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "b97f8a9b-4a8f-4743-af78-118a024591ea",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "46a962b5-4b9d-40f9-8e68-cdc212f1f21e",
          "$connId": "con_498",
          "$id": "7de3a62a-c210-43d9-b424-77a4602877cf",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["Sim", "S"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b639155c-7893-4432-83f0-89b1b708af41",
          "$connId": "con_503",
          "$id": "a3216ec7-3ca0-4918-869a-ba9510b52770",
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["Não", "Nao", "N"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
          "$connId": "con_508",
          "$id": "92eddbb6-85a6-44ba-abe2-4fd5108ebc6b",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "85a05422-0574-4cd5-a9b6-fcde37a82517",
          "type": "ExecuteScript",
          "$title": "get Templates",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(templates, namespaceTemplate) {\n    templates = JSON.parse(templates);\n    templates['erro_segunda_via'] = {\n        \"type\": \"template\",\n        \"template\": {\n            \"namespace\": namespaceTemplate,\n            \"name\": 'erro_segunda_via',\n            \"language\": {\n                \"code\": \"pt_BR\",\n                \"policy\": \"deterministic\"\n            },\n            \"components\": [\n                {\n                    \"type\": \"body\"\n                }\n            ]\n        }\n    };\n    return templates;\n}\n",
            "inputVariables": ["templates", "config.namespace"],
            "outputVariable": "templates",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "3f83d4ab-2006-40ab-82fb-f33d46d8b6f2",
          "type": "SetVariable",
          "$title": "Definir lastQuestion",
          "$invalid": false,
          "settings": {
            "variable": "lastQuestion",
            "value": "Parcela não encontrada"
          },
          "conditions": []
        },
        {
          "$id": "23cc6c8a-c391-4573-b60f-1ec0515b565f",
          "type": "TrackEvent",
          "$title": "Escolher data boleto exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Escolher data boleto exibicao",
            "action": "Exibicao"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "07642d70-9890-43b8-ab48-761edb2ef2be",
          "type": "TrackEvent",
          "$title": "Escolher data boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Escolher data boleto selecao",
            "action": "Sim"
          },
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["S", "Sim"]
            }
          ]
        },
        {
          "$id": "ddd5c02b-203e-4ffb-a05f-a42bf93bdc22",
          "type": "TrackEvent",
          "$title": "Escolher data boleto selecao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Escolher data boleto selecao",
            "action": "Não"
          },
          "conditions": [
            {
              "source": "input",
              "comparison": "approximateTo",
              "values": ["N", "Nao", "Não"]
            }
          ]
        },
        {
          "$id": "962570dc-41a9-4584-855e-bd06a2cf90bd",
          "type": "TrackEvent",
          "$title": "Escolher data boleto input",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Escolher data boleto input",
            "action": "{{input.content}}"
          },
          "conditions": [
            {
              "source": "input",
              "comparison": "notEquals",
              "values": ["Sim", "s", "Não", "Nao", "N"]
            }
          ]
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-335897bd-c553-4a3f-9095-1462d3bb10e6",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-e82144d8-259f-4cc3-b653-ace90ed3616d",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-44170d22-c4ab-4e73-8c0b-99d1a15797ac",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-ff018e09-0a8f-46ad-8e9c-e2042c0980cd",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-d4fd10d3-f912-4ac6-b79b-d82b302ece10",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "ec3ceebb-75ae-4c27-a2f8-a45774e02cc9",
      "root": false,
      "$title": "[Menu] Parcela não encontrada",
      "$position": {
        "top": "704.333px",
        "left": "2450.33px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "4595e517-6c9d-4f17-80ba-9fc9e0eb029e": {
      "$contentActions": [
        {
          "action": {
            "$id": "f35268d1-aadc-4489-9c59-cc40b96a093f",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "ba9d732e-c6fc-44e4-b234-bd70677378f9",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "ba9d732e-c6fc-44e4-b234-bd70677378f9",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "ea4da667-1bd6-40e4-95f8-2985948dbb59",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "0ef37b7d-6e00-4bfd-bc8a-754e9277bfcc",
              "type": "text/plain",
              "content": "Oiii, você ainda está aí? 😬",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "0ef37b7d-6e00-4bfd-bc8a-754e9277bfcc",
                "type": "text/plain",
                "content": "Oiii, você ainda está aí? 😬"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": false,
            "$cardContent": {
              "document": {
                "id": "5619a087-ef9f-471d-a74e-4f8141f27e4c",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false,
            "expiration": "1:0"
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "614d96a2-32c9-4389-b5b0-59a9bda3fed6",
          "$connId": "con_513",
          "$id": "1ac5b591-59dd-4d5e-9586-7540b988b7e6",
          "conditions": [
            {
              "source": "input",
              "comparison": "notExists",
              "values": []
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "fallback",
          "$connId": "con_518",
          "$id": "7006c3d3-4271-43f7-b18d-56471931842b",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["NoCampaing"],
              "variable": "campaing"
            }
          ],
          "$invalid": false,
          "typeOfStateId": "state"
        },
        {
          "stateId": "{{lastMessage@previousId}}",
          "$id": "8f32466f-5424-483b-8347-8390b6ad1da7",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "40ba61ed-9a94-4066-818e-d5301bd73f2b",
          "$typeOfContent": "",
          "type": "ProcessHttp",
          "$title": "Process \"lastMessagesResponse\" using \"POST\"",
          "$invalid": false,
          "settings": {
            "headers": {
              "Authorization": "{{config.routerAuth}}"
            },
            "method": "POST",
            "body": "{  \n  \"id\": \"{{random.guid}}\",\n  \"method\": \"get\",\n  \"uri\": \"/threads/{{contact.identity}}?$take=3\"\n}",
            "uri": "{{config.msgingUrl}}/commands",
            "responseStatusVariable": "lastMessagesStatus",
            "responseBodyVariable": "lastMessagesResponse"
          },
          "conditions": []
        },
        {
          "$id": "21686563-b6b7-4d4b-a53a-9181af2d8a30",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Process \"lastMessage\"",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(lastMessagesResponse) {\n   lastMessagesResponse = JSON.parse(lastMessagesResponse);\n\n   let messages = lastMessagesResponse.resource.items;\n\n   let indexOfLastMessage = messages.map(m => m.direction).indexOf(\"sent\");\n\n   let lastMessage  = JSON.stringify(messages[indexOfLastMessage]);\n\n   lastMessage = JSON.parse(lastMessage.replace('#stateId','stateId').replace('#stateName','stateName'));\n\n   return {\n       previousId : lastMessage.metadata.stateId,\n       previousName : lastMessage.metadata.stateName\n    }\n}",
            "inputVariables": ["lastMessagesResponse"],
            "outputVariable": "lastMessage",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        },
        {
          "$id": "654be592-bd85-4b50-89e9-d738ad422380",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Sessao expirada reengajamento exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Sessao expirada reengajamento exibicao",
            "action": "Exibicao | Origem | {{config.botName}} | {{lastMessage@previousName}}"
          },
          "conditions": []
        },
        {
          "$id": "901f6e2b-f3dc-4455-b804-2609c4c92537",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Definir variável",
          "$invalid": false,
          "settings": {
            "variable": "lastMessagesResponse"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "b2955a17-c41f-46e6-bcfc-f1798a17e21d",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"expirationInput\" to \"{{input.content}}\"",
          "$invalid": false,
          "settings": {
            "variable": "expirationInput",
            "value": "{{input.content}}"
          },
          "conditions": []
        },
        {
          "$id": "7a2638d7-d1bf-4d77-bf69-fc61a2963e5e",
          "$typeOfContent": "",
          "type": "SetVariable",
          "$title": "Set \"expirationInput\" to \"undefined\"",
          "$invalid": false,
          "settings": {
            "variable": "expirationInput"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "contains",
              "variable": "input.content",
              "values": ["|"]
            }
          ]
        },
        {
          "$id": "2e1b8233-dae8-4d1a-a9f6-35959964668d",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Sessao expirada reengajamento input",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Sessao expirada reengajamento input",
            "action": "{{expirationInput}} | {{config.botName}} | {{lastMessage@previousName}}"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "exists",
              "values": [],
              "variable": "input.content"
            }
          ]
        },
        {
          "$id": "09b5db2d-2fcf-4b7d-850a-0bd8697cd95c",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "Get Campaing",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "{{resource.script_campaings}}",
            "inputVariables": ["campaings", "input.content"],
            "outputVariable": "campaing",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "fallback",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-29b8d2cd-796f-44ce-9f4e-3616042ca406",
          "label": "ProcessHttp",
          "background": "#7762E3",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-1de57230-ac31-49bd-bd37-f94ac413c2de",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-49012cad-69a5-43a0-8796-1f001460057a",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-8ad9407b-1373-44fc-ba11-cbd27c1d7df2",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-78ec76dd-722c-4033-bc3e-db701569122c",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-681a1b2b-3d5e-4399-b518-73713277cb16",
          "label": "UserInput",
          "background": "#000000",
          "canChangeBackground": false
        }
      ],
      "id": "4595e517-6c9d-4f17-80ba-9fc9e0eb029e",
      "root": false,
      "$title": "Inatividade 1 hora",
      "$position": {
        "top": "114px",
        "left": "402px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "614d96a2-32c9-4389-b5b0-59a9bda3fed6": {
      "$contentActions": [
        {
          "action": {
            "$id": "739204ca-cfae-4655-9b05-e9f2ed5ad92c",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "2700785d-9325-4b39-bdf3-52e6565848de",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "2700785d-9325-4b39-bdf3-52e6565848de",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "82a24814-96eb-4381-97af-15e438e99134",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "68192a18-6c90-493a-99ed-1a4aa61665f9",
              "type": "text/plain",
              "content": "Como você não me respondeu, vou precisar encerrar a nossa conversa. 😓\n\nSe precisar de mim novamente, estarei por aqui! 😊",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "68192a18-6c90-493a-99ed-1a4aa61665f9",
                "type": "text/plain",
                "content": "Como você não me respondeu, vou precisar encerrar a nossa conversa. 😓\n\nSe precisar de mim novamente, estarei por aqui! 😊"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "a8fbea50-b5d5-46e3-8a8b-026751c14276",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [],
      "$enteringCustomActions": [
        {
          "$id": "fdeabe5c-d35b-482c-aac3-c521d75231a0",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Erro sessao bloco expirada origem",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Erro sessao bloco expirada origem",
            "action": "{{config.botName}} | {{lastMessage@previousName}}"
          },
          "conditions": []
        },
        {
          "$id": "beffd6b8-9abf-4917-b095-7b2654a974cc",
          "$typeOfContent": "",
          "type": "TrackEvent",
          "$title": "Erro sessao exibicao exibicao",
          "$invalid": false,
          "settings": {
            "extras": {},
            "category": "Erro sessao exibicao exibicao",
            "action": "Exibicao | {{lastMessage@previousName}}"
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "c1f9c7c8-4c87-43d9-9245-1fa9d86dbf54",
          "$typeOfContent": "",
          "type": "Redirect",
          "$title": "Redirect to \"Main\"",
          "$invalid": false,
          "settings": {
            "address": "Main",
            "context": {
              "type": "text/plain",
              "value": "expiração"
            }
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "onboarding",
        "$invalid": false
      },
      "$tags": [
        {
          "id": "blip-tag-e28ff976-151f-473a-8615-663b49d9a373",
          "label": "TrackEvent",
          "background": "#61D36F",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-af88cd1d-2603-4f1c-be77-b5f1bf660671",
          "label": "Redirect",
          "background": "#1EA1FF",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-45a4a574-950f-4bbf-9287-1f7940e5f27b",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "614d96a2-32c9-4389-b5b0-59a9bda3fed6",
      "root": false,
      "$title": "Finaliza por inatividade",
      "$position": {
        "top": "102px",
        "left": "184px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    },
    "d3b198fd-104a-4317-889b-12bc6fc95cd7": {
      "$contentActions": [
        {
          "action": {
            "$id": "53242dcf-4f52-4810-9400-dcb89b9349b2",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "d4a33f1a-78e9-404b-8f08-7f589a020f6a",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "d4a33f1a-78e9-404b-8f08-7f589a020f6a",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "dce01da5-6171-43cd-9140-a9e68f036ace",
            "$typeOfContent": "text",
            "type": "SendMessage",
            "settings": {
              "id": "8ae9eda5-1365-47d8-8b71-2c91a96f3b1e",
              "type": "text/plain",
              "content": "{{textFirstBoleto}}",
              "metadata": {}
            },
            "$cardContent": {
              "document": {
                "id": "8ae9eda5-1365-47d8-8b71-2c91a96f3b1e",
                "type": "text/plain",
                "content": "{{textFirstBoleto}}"
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "7b6abbe2-9e3c-42ee-a3c0-7d2b9f42f16e",
            "$typeOfContent": "chat-state",
            "type": "SendMessage",
            "settings": {
              "id": "8dc933c8-6f45-4340-8bd3-b3daa9aae21e",
              "type": "application/vnd.lime.chatstate+json",
              "content": {
                "state": "composing",
                "interval": 1000
              }
            },
            "$cardContent": {
              "document": {
                "id": "8dc933c8-6f45-4340-8bd3-b3daa9aae21e",
                "type": "application/vnd.lime.chatstate+json",
                "content": {
                  "state": "composing",
                  "interval": 1000
                }
              },
              "editable": true,
              "deletable": true,
              "position": "left"
            }
          },
          "$invalid": false
        },
        {
          "action": {
            "$id": "cdf2b0b4-049a-4005-9b03-9fc5fbd10e32",
            "$typeOfContent": "raw-content",
            "type": "SendRawMessage",
            "settings": {
              "metadata": {},
              "type": "application/json",
              "rawContent": "{{jsonMessage}}"
            }
          },
          "$invalid": false
        },
        {
          "input": {
            "bypass": true,
            "$cardContent": {
              "document": {
                "id": "0457ca56-6a76-4a29-84d7-9b2c555b3db2",
                "type": "text/plain",
                "textContent": "Entrada do usuário",
                "content": "Entrada do usuário"
              },
              "editable": false,
              "deletable": true,
              "position": "right",
              "editing": false
            },
            "$invalid": false
          },
          "$invalid": false
        }
      ],
      "$conditionOutputs": [
        {
          "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
          "$connId": "con_523",
          "$id": "eef63251-fc5c-4960-a5ba-8b0d512c7e8b",
          "conditions": [
            {
              "source": "context",
              "comparison": "notEquals",
              "values": ["200"],
              "variable": "responsePdfBilletStatus"
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "a437c1e5-a319-4f23-a1bb-1a7fa43bb516",
          "$connId": "con_528",
          "$id": "7c32e92a-c4ab-4a95-9b0c-b8f1ab4b3db9",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            },
            {
              "source": "context",
              "comparison": "equals",
              "variable": "timesPassedBoleto",
              "values": ["1"]
            },
            {
              "source": "context",
              "comparison": "greaterThanOrEquals",
              "variable": "amountBoleto",
              "values": ["1"]
            }
          ],
          "$invalid": false
        },
        {
          "stateId": "b639155c-7893-4432-83f0-89b1b708af41",
          "$connId": "con_533",
          "$id": "3da7d78d-fecf-44cf-996f-8f47980d09e7",
          "conditions": [
            {
              "source": "input",
              "comparison": "exists",
              "values": []
            }
          ],
          "$invalid": false
        }
      ],
      "$enteringCustomActions": [
        {
          "$id": "2d223f37-9adb-4058-844b-0c0238e5c100",
          "type": "SetVariable",
          "$title": "Definir textFirstBoleto",
          "$invalid": false,
          "settings": {
            "variable": "textFirstBoleto",
            "value": "Lembrando que essa é a parcela mais antiga em aberto!"
          },
          "conditions": [
            {
              "source": "context",
              "comparison": "equals",
              "variable": "timesPassedBoleto",
              "values": ["1"]
            }
          ]
        },
        {
          "$id": "d580bb6b-646a-42b5-a03e-d610b44198f9",
          "$typeOfContent": "",
          "type": "ExecuteScript",
          "$title": "set jsonMessage",
          "$invalid": false,
          "settings": {
            "function": "run",
            "source": "function run(responsePdfBilletBody) {\n    responsePdfBilletBody = JSON.parse(responsePdfBilletBody);\n    return {\n        \"recipient_type\": \"individual\",\n        \"type\": \"document\",\n        \"document\": {\n            \"link\": responsePdfBilletBody.mediaUri,\n            \"caption\": \"Boleto.pdf\"\n        }\n    };\n}",
            "inputVariables": ["responsePdfBilletBody"],
            "outputVariable": "jsonMessage",
            "LocalTimeZoneEnabled": false
          },
          "conditions": []
        }
      ],
      "$leavingCustomActions": [
        {
          "$id": "5d9518dc-0f78-43e9-9e7c-e3b710fe2f80",
          "type": "SetVariable",
          "$title": "Definir textFirstBoleto",
          "$invalid": false,
          "settings": {
            "variable": "textFirstBoleto"
          },
          "conditions": []
        }
      ],
      "$inputSuggestions": [],
      "$defaultOutput": {
        "stateId": "294e957c-f15c-4cf7-a940-76de1ce022aa",
        "$invalid": false
      },
      "$tags": [
        {
          "background": "#61D36F",
          "label": "EventTracking",
          "id": "blip-tag-cfc98b26-5b63-89eb-6ae7-13e2393c66d9",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-00e9c841-8cab-4640-b9f2-09d6c7ca8497",
          "label": "SetVariable",
          "background": "#FF4A1E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-debf29e0-b829-4b31-87d4-9868dd0cef34",
          "label": "ExecuteScript",
          "background": "#FF961E",
          "canChangeBackground": false
        },
        {
          "id": "blip-tag-5af28faf-5340-4825-92cf-0cec8d06b9e7",
          "label": "SendMessage",
          "background": "#EE82EE",
          "canChangeBackground": false
        }
      ],
      "id": "d3b198fd-104a-4317-889b-12bc6fc95cd7",
      "root": false,
      "$title": "Enviar boleto impresso",
      "$position": {
        "top": "1544px",
        "left": "3632px"
      },
      "$invalidContentActions": false,
      "$invalidOutputs": false,
      "$invalidCustomActions": false,
      "$invalid": false
    }
  },
  "configuration": {
    "builder:minimumIntentScore": "0.5",
    "builder:stateTrack": "true",
    "builder:useTunnelOwnerContext": "true",
    "urlApi": "https://emprestimosim.cs.blip.ai",
    "authKey": "5b2c0c224e2b4244a93bfa9cf8d6994a",
    "namespace": "7b37178b_d98b_4bf6_83e1_c44a429b430e",
    "builder:#localTimeZone": "E. South America Standard Time",
    "builder:stateExpiration": "1.00:00:00",
    "botName": "2viaboleto",
    "routerAuth": "Key c2ltd3BwcHJvZHJvdXRlcjp5NUdXSWdQQllOdWVtY2VselhvUA==",
    "msgingUrl": "https://emprestimosim.http.msging.net",
    "TraceTttl": 0,
    "Timer": 0,
    "TraceTargetType": "Http",
    "TraceMode": "All",
    "TraceTarget": "https://take-api-beholder.cs.blip.ai/api/traces/simhmg2viadeboleto",
    "TraceCacheMode": 0
  },
  "globalActions": {
    "$contentActions": [],
    "$conditionOutputs": [],
    "$enteringCustomActions": [
      {
        "$id": "6e793fa2-c492-4f91-bb29-f04be470c0a9",
        "type": "SetVariable",
        "$title": "Definir templates",
        "$invalid": false,
        "settings": {
          "variable": "templates",
          "value": "{}"
        },
        "conditions": []
      },
      {
        "$id": "cce12395-40f8-494f-83a9-91ccc1212418",
        "$typeOfContent": "",
        "type": "SetVariable",
        "$title": "Define Campaings",
        "$invalid": false,
        "settings": {
          "variable": "campaings",
          "value": "{{resource.campaings}}"
        },
        "conditions": []
      }
    ],
    "$leavingCustomActions": [],
    "$inputSuggestions": [],
    "$defaultOutput": {
      "stateId": "fallback",
      "$invalid": false
    },
    "$tags": [],
    "id": "global-actions",
    "$invalidContentActions": false,
    "$invalidOutputs": false,
    "$invalidCustomActions": false,
    "$invalid": false
  }
}
